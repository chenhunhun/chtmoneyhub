<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta http-equiv="content-type" content="text/html; charset=gbk">
    <meta http-equiv="content-style-type" content="text/css">
    <meta http-equiv="content-script-type" content="text/javascript">
    <meta name="version" content="neblog-1.0">
    <script type="text/javascript">
      
      
      document.uniqueID!=document.uniqueID&&!!location.hash&&(location.hash=location.hash); 
      document.domain = location.hostname.replace(/^.*\.([\w]+\.[\w]+)$/,'$1');
      window.focus();
      window.getMusicTimeStamp=function(){return 'a9b782fd4420872583a1a0b78931ec79';};
    </script>
<title>SIP 基础知识 - hjz51的日志 - 网易博客</title>
<meta name="author" content="hjz5511,hjz51">
<meta name="keywords" content="SIP 基础知识,日志,hjz51,hjz51的博客,网易博客,网易,blog">
<meta name="description" content="SIP 基础知识,hjz51的网易博客,网易博客,">
  <script type="text/javascript">
    (function(){
     var R=24,C=11,a=[];
     for(var i=0;i<C;i++)for(var j=0;j<R;a.push('.icn0-'+i+j+'{background-position:'+(i>0?('-'+i*40+'px'):'0')+' '+(j>0?('-'+j*20+'px'):'0')+';}'),j++);
          document.write('<style type="text/css">'+a.join('')+'</st'+'yle>');
    })();
  </script><style type="text/css">.icn0-00{background-position:0 0;}.icn0-01{background-position:0 -20px;}.icn0-02{background-position:0 -40px;}.icn0-03{background-position:0 -60px;}.icn0-04{background-position:0 -80px;}.icn0-05{background-position:0 -100px;}.icn0-06{background-position:0 -120px;}.icn0-07{background-position:0 -140px;}.icn0-08{background-position:0 -160px;}.icn0-09{background-position:0 -180px;}.icn0-010{background-position:0 -200px;}.icn0-011{background-position:0 -220px;}.icn0-012{background-position:0 -240px;}.icn0-013{background-position:0 -260px;}.icn0-014{background-position:0 -280px;}.icn0-015{background-position:0 -300px;}.icn0-016{background-position:0 -320px;}.icn0-017{background-position:0 -340px;}.icn0-018{background-position:0 -360px;}.icn0-019{background-position:0 -380px;}.icn0-020{background-position:0 -400px;}.icn0-021{background-position:0 -420px;}.icn0-022{background-position:0 -440px;}.icn0-023{background-position:0 -460px;}.icn0-10{background-position:-40px 0;}.icn0-11{background-position:-40px -20px;}.icn0-12{background-position:-40px -40px;}.icn0-13{background-position:-40px -60px;}.icn0-14{background-position:-40px -80px;}.icn0-15{background-position:-40px -100px;}.icn0-16{background-position:-40px -120px;}.icn0-17{background-position:-40px -140px;}.icn0-18{background-position:-40px -160px;}.icn0-19{background-position:-40px -180px;}.icn0-110{background-position:-40px -200px;}.icn0-111{background-position:-40px -220px;}.icn0-112{background-position:-40px -240px;}.icn0-113{background-position:-40px -260px;}.icn0-114{background-position:-40px -280px;}.icn0-115{background-position:-40px -300px;}.icn0-116{background-position:-40px -320px;}.icn0-117{background-position:-40px -340px;}.icn0-118{background-position:-40px -360px;}.icn0-119{background-position:-40px -380px;}.icn0-120{background-position:-40px -400px;}.icn0-121{background-position:-40px -420px;}.icn0-122{background-position:-40px -440px;}.icn0-123{background-position:-40px -460px;}.icn0-20{background-position:-80px 0;}.icn0-21{background-position:-80px -20px;}.icn0-22{background-position:-80px -40px;}.icn0-23{background-position:-80px -60px;}.icn0-24{background-position:-80px -80px;}.icn0-25{background-position:-80px -100px;}.icn0-26{background-position:-80px -120px;}.icn0-27{background-position:-80px -140px;}.icn0-28{background-position:-80px -160px;}.icn0-29{background-position:-80px -180px;}.icn0-210{background-position:-80px -200px;}.icn0-211{background-position:-80px -220px;}.icn0-212{background-position:-80px -240px;}.icn0-213{background-position:-80px -260px;}.icn0-214{background-position:-80px -280px;}.icn0-215{background-position:-80px -300px;}.icn0-216{background-position:-80px -320px;}.icn0-217{background-position:-80px -340px;}.icn0-218{background-position:-80px -360px;}.icn0-219{background-position:-80px -380px;}.icn0-220{background-position:-80px -400px;}.icn0-221{background-position:-80px -420px;}.icn0-222{background-position:-80px -440px;}.icn0-223{background-position:-80px -460px;}.icn0-30{background-position:-120px 0;}.icn0-31{background-position:-120px -20px;}.icn0-32{background-position:-120px -40px;}.icn0-33{background-position:-120px -60px;}.icn0-34{background-position:-120px -80px;}.icn0-35{background-position:-120px -100px;}.icn0-36{background-position:-120px -120px;}.icn0-37{background-position:-120px -140px;}.icn0-38{background-position:-120px -160px;}.icn0-39{background-position:-120px -180px;}.icn0-310{background-position:-120px -200px;}.icn0-311{background-position:-120px -220px;}.icn0-312{background-position:-120px -240px;}.icn0-313{background-position:-120px -260px;}.icn0-314{background-position:-120px -280px;}.icn0-315{background-position:-120px -300px;}.icn0-316{background-position:-120px -320px;}.icn0-317{background-position:-120px -340px;}.icn0-318{background-position:-120px -360px;}.icn0-319{background-position:-120px -380px;}.icn0-320{background-position:-120px -400px;}.icn0-321{background-position:-120px -420px;}.icn0-322{background-position:-120px -440px;}.icn0-323{background-position:-120px -460px;}.icn0-40{background-position:-160px 0;}.icn0-41{background-position:-160px -20px;}.icn0-42{background-position:-160px -40px;}.icn0-43{background-position:-160px -60px;}.icn0-44{background-position:-160px -80px;}.icn0-45{background-position:-160px -100px;}.icn0-46{background-position:-160px -120px;}.icn0-47{background-position:-160px -140px;}.icn0-48{background-position:-160px -160px;}.icn0-49{background-position:-160px -180px;}.icn0-410{background-position:-160px -200px;}.icn0-411{background-position:-160px -220px;}.icn0-412{background-position:-160px -240px;}.icn0-413{background-position:-160px -260px;}.icn0-414{background-position:-160px -280px;}.icn0-415{background-position:-160px -300px;}.icn0-416{background-position:-160px -320px;}.icn0-417{background-position:-160px -340px;}.icn0-418{background-position:-160px -360px;}.icn0-419{background-position:-160px -380px;}.icn0-420{background-position:-160px -400px;}.icn0-421{background-position:-160px -420px;}.icn0-422{background-position:-160px -440px;}.icn0-423{background-position:-160px -460px;}.icn0-50{background-position:-200px 0;}.icn0-51{background-position:-200px -20px;}.icn0-52{background-position:-200px -40px;}.icn0-53{background-position:-200px -60px;}.icn0-54{background-position:-200px -80px;}.icn0-55{background-position:-200px -100px;}.icn0-56{background-position:-200px -120px;}.icn0-57{background-position:-200px -140px;}.icn0-58{background-position:-200px -160px;}.icn0-59{background-position:-200px -180px;}.icn0-510{background-position:-200px -200px;}.icn0-511{background-position:-200px -220px;}.icn0-512{background-position:-200px -240px;}.icn0-513{background-position:-200px -260px;}.icn0-514{background-position:-200px -280px;}.icn0-515{background-position:-200px -300px;}.icn0-516{background-position:-200px -320px;}.icn0-517{background-position:-200px -340px;}.icn0-518{background-position:-200px -360px;}.icn0-519{background-position:-200px -380px;}.icn0-520{background-position:-200px -400px;}.icn0-521{background-position:-200px -420px;}.icn0-522{background-position:-200px -440px;}.icn0-523{background-position:-200px -460px;}.icn0-60{background-position:-240px 0;}.icn0-61{background-position:-240px -20px;}.icn0-62{background-position:-240px -40px;}.icn0-63{background-position:-240px -60px;}.icn0-64{background-position:-240px -80px;}.icn0-65{background-position:-240px -100px;}.icn0-66{background-position:-240px -120px;}.icn0-67{background-position:-240px -140px;}.icn0-68{background-position:-240px -160px;}.icn0-69{background-position:-240px -180px;}.icn0-610{background-position:-240px -200px;}.icn0-611{background-position:-240px -220px;}.icn0-612{background-position:-240px -240px;}.icn0-613{background-position:-240px -260px;}.icn0-614{background-position:-240px -280px;}.icn0-615{background-position:-240px -300px;}.icn0-616{background-position:-240px -320px;}.icn0-617{background-position:-240px -340px;}.icn0-618{background-position:-240px -360px;}.icn0-619{background-position:-240px -380px;}.icn0-620{background-position:-240px -400px;}.icn0-621{background-position:-240px -420px;}.icn0-622{background-position:-240px -440px;}.icn0-623{background-position:-240px -460px;}.icn0-70{background-position:-280px 0;}.icn0-71{background-position:-280px -20px;}.icn0-72{background-position:-280px -40px;}.icn0-73{background-position:-280px -60px;}.icn0-74{background-position:-280px -80px;}.icn0-75{background-position:-280px -100px;}.icn0-76{background-position:-280px -120px;}.icn0-77{background-position:-280px -140px;}.icn0-78{background-position:-280px -160px;}.icn0-79{background-position:-280px -180px;}.icn0-710{background-position:-280px -200px;}.icn0-711{background-position:-280px -220px;}.icn0-712{background-position:-280px -240px;}.icn0-713{background-position:-280px -260px;}.icn0-714{background-position:-280px -280px;}.icn0-715{background-position:-280px -300px;}.icn0-716{background-position:-280px -320px;}.icn0-717{background-position:-280px -340px;}.icn0-718{background-position:-280px -360px;}.icn0-719{background-position:-280px -380px;}.icn0-720{background-position:-280px -400px;}.icn0-721{background-position:-280px -420px;}.icn0-722{background-position:-280px -440px;}.icn0-723{background-position:-280px -460px;}.icn0-80{background-position:-320px 0;}.icn0-81{background-position:-320px -20px;}.icn0-82{background-position:-320px -40px;}.icn0-83{background-position:-320px -60px;}.icn0-84{background-position:-320px -80px;}.icn0-85{background-position:-320px -100px;}.icn0-86{background-position:-320px -120px;}.icn0-87{background-position:-320px -140px;}.icn0-88{background-position:-320px -160px;}.icn0-89{background-position:-320px -180px;}.icn0-810{background-position:-320px -200px;}.icn0-811{background-position:-320px -220px;}.icn0-812{background-position:-320px -240px;}.icn0-813{background-position:-320px -260px;}.icn0-814{background-position:-320px -280px;}.icn0-815{background-position:-320px -300px;}.icn0-816{background-position:-320px -320px;}.icn0-817{background-position:-320px -340px;}.icn0-818{background-position:-320px -360px;}.icn0-819{background-position:-320px -380px;}.icn0-820{background-position:-320px -400px;}.icn0-821{background-position:-320px -420px;}.icn0-822{background-position:-320px -440px;}.icn0-823{background-position:-320px -460px;}.icn0-90{background-position:-360px 0;}.icn0-91{background-position:-360px -20px;}.icn0-92{background-position:-360px -40px;}.icn0-93{background-position:-360px -60px;}.icn0-94{background-position:-360px -80px;}.icn0-95{background-position:-360px -100px;}.icn0-96{background-position:-360px -120px;}.icn0-97{background-position:-360px -140px;}.icn0-98{background-position:-360px -160px;}.icn0-99{background-position:-360px -180px;}.icn0-910{background-position:-360px -200px;}.icn0-911{background-position:-360px -220px;}.icn0-912{background-position:-360px -240px;}.icn0-913{background-position:-360px -260px;}.icn0-914{background-position:-360px -280px;}.icn0-915{background-position:-360px -300px;}.icn0-916{background-position:-360px -320px;}.icn0-917{background-position:-360px -340px;}.icn0-918{background-position:-360px -360px;}.icn0-919{background-position:-360px -380px;}.icn0-920{background-position:-360px -400px;}.icn0-921{background-position:-360px -420px;}.icn0-922{background-position:-360px -440px;}.icn0-923{background-position:-360px -460px;}.icn0-100{background-position:-400px 0;}.icn0-101{background-position:-400px -20px;}.icn0-102{background-position:-400px -40px;}.icn0-103{background-position:-400px -60px;}.icn0-104{background-position:-400px -80px;}.icn0-105{background-position:-400px -100px;}.icn0-106{background-position:-400px -120px;}.icn0-107{background-position:-400px -140px;}.icn0-108{background-position:-400px -160px;}.icn0-109{background-position:-400px -180px;}.icn0-1010{background-position:-400px -200px;}.icn0-1011{background-position:-400px -220px;}.icn0-1012{background-position:-400px -240px;}.icn0-1013{background-position:-400px -260px;}.icn0-1014{background-position:-400px -280px;}.icn0-1015{background-position:-400px -300px;}.icn0-1016{background-position:-400px -320px;}.icn0-1017{background-position:-400px -340px;}.icn0-1018{background-position:-400px -360px;}.icn0-1019{background-position:-400px -380px;}.icn0-1020{background-position:-400px -400px;}.icn0-1021{background-position:-400px -420px;}.icn0-1022{background-position:-400px -440px;}.icn0-1023{background-position:-400px -460px;}</style>
    <link type="text/css" rel="stylesheet" href="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/c.css">
    <link type="text/css" rel="stylesheet" href="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/b.css" id="blog-163-com-theme">
  <!--[if lte IE 6]>
  <style type="text/css">
    html,body,#blog-163-com-ie6body{height:100%;width:100%;overflow:hidden;}
    #blog-163-com-ie6body{overflow:auto;overflow-y:scroll;}
    #blog-163-com{background:none;}
  </style>
  <![endif]-->
  
  
  <style type="text/css">.m-3 .nbw-ryt .left .mcnt{padding-left:10px;}.m-3 .nbw-ryt .right .acts{position:relative;margin:0 0 12px 0;line-height:20px;}.m-3 .nbw-ryt .right .more{margin-top:-15px;height:24px;line-height:24px;}#blog-163-com .m-3 .phide{display:none;}.m-3 .nbw-ryt .left .nbw-bitm{margin:0;padding:0 0 0 10px;position:relative;}.m-3 .nbw-ryt .left .nbw-bitm .title{margin:30px 0 20px;}.m-3 .nbw-ryt .left .nbw-bitm .title .tcnt{font-size:20px;font-family:'微软雅黑','黑体',Arial,Helvetica,Sans-Serif;}.m-3 .nbw-ryt .left .nbw-bitm .tdep{margin-bottom:20px;}.m-3 .nbw-ryt .left .nbw-bitm .tbar{margin:5px 0;padding:10px 10px 10px 0;line-height:20px;text-align:right;}.m-3 .nbw-ryt .left .nbw-bitm .bct{font-size:14px;padding-left:0}.m-3 .nbw-ryt .left .nbw-bitm .muava{float:left;margin:5px 7px 0 0;border-width:0 1px 0 0;height:40px;}.m-3 .nbw-ryt .left .snl .pnb div{line-height:20px;text-align:left;}.m-3 .nbw-ryt .cite{margin:20px 0 0 50px;line-height:24px;text-align:left;}.m-3 .nbw-ryt .cite .close{float:right;margin:0;text-align:right;}.m-3 .nbw-ryt .cite span{cursor:pointer;}.m-3 .nbw-ryt .cite .nbw-act{text-align:center;}.m-3 .nbw-ryt .cite .ads{margin-left:20px;width:400px;}.m-3 .nbw-ryt .cite .tbac{margin-left:60px;padding:0;border:0;list-style:none;line-height:24px;}.m-3 .nbw-ryt .cite .tbl{width:150px;overflow:hidden;}.m-3 .nbw-ryt .cite .tbr{margin-left:20px;overflow:hidden;}.m-3 .nbw-act-share{position:relative;}.m-3 .nbw-act-share .nas-wrap{visibility:hidden;}.m-3 .nbw-act-share:hover .nas-wrap,.m-3 .js-share-hover .nas-wrap{visibility:visible;}.m-3 .nas-wrap,.nas-itm,.nas-wb{background:url(/newpage/images/blog/icn-share.png?0011) no-repeat 9999px 9999px;}.m-3 .nas-wrap{margin-top:5px;}.nas-itm,.nas-wb{text-decoration:none;}.nas-itm,.nas-wb:hover{text-decoration:underline;}.m-3 .nas-itm{float:left;width:16px;height:16px;margin:0 1px 0 6px;overflow:hidden;cursor:pointer;}.m-3 .nas-itm0{background-position:0 -173px;}.m-3 .nas-itm1{background-position:0 -56px;}.m-3 .nas-itm2{background-position:0 -85px;}.m-3 .nas-itm3{background-position:0 -227px;}.m-3 .nas-itm4{background-position:0 -143px;}.m-3 .nas-itm5{background-position:0 -201px;}.m-3 .nas-itm6{background-position:0 -249px;}.m-3 .nas-itm7{background-position:0 -283px;}.m-3 .nas-itm8{background-position:0 -313px;}.m-3 .nas-itm9{background-position:0 -342px;}.nas-wb{padding-left:20px;cursor:pointer;line-height:normal;background-position:0 -173px;}.nas-icn0fix{margin-top:4px;}.nas-tofix{margin-top:0;*margin-top:2px;line-height:25px;}.m-3 .ptc{position:absolute;cursor:pointer;}.m-3 .ptc .ptcp .bcmimg{float:left;background-image:url("http://b.bst.126.net/newpage/images/blogcmtimg.png");background-position:0 0;background-repeat:no-repeat;height:22px;line-height:22px;width:22px;padding:0 6px 0 0;}.m-3 .ptc .ptcp{cursor:pointer;position:absolute;left:5px;bottom:5px;clear:both;width:94px;}.m-3 .ptc .ptcp .ptcmi{float:left;width:16px;height:16px;padding:3px 6px 3px 5px;_padding:2px 6px 0 3px;margin:0;}.m-3 .ptc .ptcp .ptcmt{background-position:-418px -50px;float:left;width:67px;height:22px;overflow:hidden;margin:0px 0 0 -3px;line-height:22px;*line-height:23px;text-align:left;color:#444444;}.m-3 .ptc .ptcp .ptcmt-2{width:61px;padding-left:6px;background-position:-424px -50px;}.m-3 .relateblog{text-align:left;}.m-3 .relateblog h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .relateblog .cnt{padding-left:8px;margin:10px 0 10px 0px;}.m-3 .relateblog .cnt ul{margin:0;padding:0;list-style:none;}.m-3 .relateblog .cnt ul li{height:24px;margin-right:20px;line-height:24px;}.m-3 .relateblog .cnt ul li span{margin:0 8px;}.m-3 .author, .m-3 .comment{text-align:left;}.m-3 .author .nlogif{width:150px;line-height:20px;margin-left:5px;_margin-left:3px;}.m-3 .author .nlogif .nbw-fce{margin:0 3px 0 10px;_margin-left:5px}.m-3 .author .nlogif .pright{width:85px;margin:0;padding:5px 0;_padding-top:10px}.m-3 .nbw-ryt .right h4{margin:0;padding:0;line-height:30px;}.m-3 .author h4, .m-3 .comment h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .author .cwd{border:0;text-align:left;}.m-3 .author .vname{width:50px;text-align:center;}.m-3 .author .cnt{margin:10px 0 10px -5px;}.m-3 .author .nbw-fce{margin:0 11px;}.m-3 .author .nbw-f50{width:50px}.m-3 .nbw-ryt .left .top{position:relative;padding-bottom:5px;line-height:20px;}.m-3 .nbw-ryt .left .top .ilft{position:absolute;left:0;top:0;}.m-3 .nbw-ryt .left .top .irgt{position:absolute;right:-10px;top:0;}.m-3 .nbw-ryt .left .top .pleft{margin-left:20px;_margin-left:10px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .top .pright{margin-right:10px;_margin-right:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .top{position:relative;padding:5px 0 15px 0;line-height:20px;}.m-3 .nbw-ryt .left .snl .top .ilft{position:absolute;left:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .irgt{position:absolute;right:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .pleft{margin-left:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .snl .top .pright{margin-right:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .pnb{padding:5px 0 10px 10px;overflow:hidden;_width:100%}.m-3 .comment h4{padding:0 0 0 10px}.m-3 .comment .publish{margin:10px 0;padding:0 0 10px 5px;text-align:left;}.m-3 .comment .publish .nbw-fce{padding-top:0;}.m-3 .comment .publish .nbw-fce .cwd{border:0;}.m-3 .comment .publish .redt{margin-left:65px;}.m-3 .comment .nolog{border:1px solid #000;background-color:#FFFFE1;height:40px;line-height:40px;text-align:center;padding:0;_padding:10px 0;_height:20px;}.m-3 .comment .case{padding-left:5px;padding-bottom:10px;}.m-3 .comment .vgl{margin:8px;width:75%;text-align:center;}#blog-163-com .m-3 .comment .nbw-cmt .cnt{width:488px;}#blog-163-com .m-3 .comment .nbw-cmt .nbw-cmt .cnt{width:444px;}.m-3 .edt-cmt{width:444px;}.m-3 .comment .publish .edt-cmt{width:488px;}.m-3 .comment .publish .edt-cmt .zbcc{display:none;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs0{font-size:150%;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs1{font-size:130%;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs2{}.m-3 .nbw-ryt .left .nbw-bitm .js-fs3{font-size:12px;}.m-3 .js-fcurrent{font-color:#000;font-weight:bold;text-decoration:none;}.m-3 .nbw-bitm .dream{margin-top:-10px;clear:both}.m-3 .nbw-bitm .cited{margin-top:-15px;}.m-3 .nbw-bitm .rdif{line-height:24px;height:24px;}.m-3 .nbw-bitm .rdif .pnt{line-height:24px;height:24px;margin-right:10px;}.m-3 .nbw-bitm .rdif .pclass{vertical-align:middle;width:57px;height:22px;}.m-3 .nbw-bitm .rdif .rdct{display:inline-block;}.m-3 .snl .rdcnt{padding:5px;text-align:left}.m-3 .snl .rdcnt .nbw-fce{margin:0 5px}.m-3 .snl .rdcnt p{margin:10px 0}.m-3 .snl .rdcnt .rrb{list-style:none;height:22px;line-height:22px;}.m-3 .acts .iblock{width:18px;}.m-3 .ns{margin:0 0 0 2px;}.m-3 .cancel{display:none;}.m-3 .js-hover .cancel, .m-3 .follow:hover .cancel, .m-3 .frd:hover .cancel{display:inline;}.m-3 .follow{*margin-left:2px;}.m-3 .flw{padding:7px 8px;color:#000;background:#fefce4;border:1px solid #b7b7b7;}.m-3 .acts .flw .iblock{width:20px;}.m-3 .sntesctf{width:15px;margin-left:3px;}.dr-warm{width:420px;padding:12px 18px;margin:18px 0;line-height:20px;border:1px solid #aaa;color:#666;background:#ffffdc;}.dr-warm a,.dr-warm a:hover{text-decoration:underline;color:#02a;}.dr-warm .codeinput{width:70px;text-align:center;}.dr-warm .codediv{margin:10px 0 0;}.dr-warm .ml{margin:0px 10px;vertical-align:middle;}.dr-warm .button{background-color:#77716F;width:42px;height:20px;border:0 none;color:#fff;cursor:pointer;}.m-3 .commentcntwrap{position:relative;zoom:1;}.m-3 .cmtMultiUserRole{position:absolute;left:62px;bottom:5px;width:300px;overflow-x;hidden;}.m-3 .cmtMultiUserRole .selectRole{float:right;padding:1px 1px 0 1px;border:none;}.m-3 .cmtMultiUserRole .selectRole .ztxt{float:left;width:auto;overflow:hidden;}.m-3 .cmtMultiUserRole .selectRole .zdwn{float:left;background:url("/newpage/images/icon.png") -240px -420px no-repeat;text-indent:-9999px;}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm{}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm:hover, .m-3 .cmtMultiUserRole .selectRole .slst .item.js-zhvr-910{color:#333;background-color:#ececec;}.m-3 .nbw-cmt{position:static;}.m-3 .nbw-cmt .thde{position:relative;zoom:1;}.m-3 .publish .redt{position:relative;zoom:1;}.m-3 .publish .redt .cmtMultiUserRole{left:135px;_left:132px;}.m-3 .cmtMultiUserRole .js-showlist{padding:0;margin:0;border-style:solid;border-width:1px 1px 0 1px;border-color:#aaa;}.m-3 .cmtMultiUserRole .js-showlist .zlst{border-style:solid;border-width:0 1px 1px 1px;border-color:#aaa;}.m-3 .multiuserItem{}.m-3 .multiuserItem .author{margin-right:-50px;}.m-3 .multiuserItem .multicntwrap{padding:30px 0 20px 0;}.m-3 .multiuserItem .multicnt{_padding-top:2px;margin-left:50px;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .title{width:95%;margin-top:0;margin-bottom:0;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .tdep{margin-bottom:0;}.m-3 .attachment{margin-bottom:20px;}.m-3 .awidth{width:40px;}.m-3 .view{margin-right:10px;}.m-3 .nbw-cmt .op{height:18px;line-height:18px;}.m-3 .suggestedreading{overflow:hidden;position:relative;zoom:1;}.m-3 .suggestedreading .m-list{margin-left:0;padding-left:15px;overflow:hidden;font-size:14px;}.m-3 .suggestedreading .m-list .gap{margin-left:8px;color:#ADADAD;}.m-3 .suggestedreading .m-list li{height:20px;padding:3px 0 2px;vertical-align:middle;}.m-3 .suggestedreading .wrap li{float:left;width:118px;height:146px;}.m-3 .suggestedreading .suggesteditem1{line-height:24px;margin:5px 0;font-size:12px;margin-right:10px;}.m-3 .suggestedreading .suggesteditem2{margin:5px 0;font-size:12px;}.m-3 .suggestedreading .suggesteditem2 .imgwrap1{position:relative;overflow:hidden;width:90px;height:90px;zoom:1;}.m-3 .suggestedreading .suggesteditem2 .imgwrap2{z-index:2;position:absolute;left:0;top:0;}.m-3 .suggestedreading .suggesteditem2 .btitle{width:96px;height:148px;overflow:hidden;text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 .sep{padding:5px 10px 0 10px;}.m-3 .suggestedreading .suggesteditem2 a{cursor:pointer;}.m-3 .suggestedreading .suggesteditem2 a:hover{text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 img{border-width:0;}.m-3 .suggestedreading .color1{background-color:#B3786B;}.m-3 .suggestedreading .color2{background-color:#D2C1A8;}.m-3 .suggestedreading .color3{background-color:#D46646;}.m-3 .suggestedreading .color4{background-color:#D28FA8;}.m-3 .suggestedreading .color5{background-color:#C84F54;}.m-3 .suggestedreading .white{color:white;}.m-3 .suggestedreading .imgtip{margin:2px;font-weight:bold;color:white;font-size:13px;font-family:微软雅黑;}.m-3 .suggestedreading .borderwrap{padding:2px;background-color:#fff;}.m-3 .suggestedreading .time{position:absolute;bottom:0;right:0;}.m-3 .suggestedreading .hidsep{margin-left:-1px;}.m-3 .suggestedreading .srtitle{font-size:14px;font-weight:bold;margin-bottom:10px;}.m-3 #yodaoad{padding-left:5px;}.m-3 #yodaoad_3{padding:20px 0 25px 0;}.m-3 .relategroup{width:45%}.m-3 .blogvote{padding-left:35px;position:relative;zoom:1;}.m-3 .blogvote .sep{margin:0 5px;}.m-3 .blogvote .vtitle{margin:15px 0 15px -30px;}.m-3 .blogvote .vtitle span{padding-right:8px;}.m-3 .blogvote .vtitle .close{width:60px;height:24px;vertical-align:middle;}.m-3 .blogvote .roleview{padding-right:10px}.m-3 .blogvote .roleview .iblock{width:10px}.m-3 .blogvote .options{clear:both;margin-right:10px}.m-3 .blogvote .options ul{margin:0;padding:0;list-style:none;}.m-3 .blogvote .options ul li{padding:10px 0;line-height:16px;}.m-3 .blogvote .options .role{margin-bottom:15px;}.m-3 .blogvote .options .acts{margin-bottom:15px;height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt{height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt button{height:24px;line-height:18px;}.m-3 .blogvote .options .acts .leftpt span{}.m-3 .blogvote .options .acts .view{margin-left:5px;}.m-3 .blogvote .fvote{padding-top:10px;}.m-3 .blogvote .fvote ul{list-style:none;margin:10px 0;padding:0;}.m-3 .blogvote .fvote ul li{line-height:20px;margin:5px 0;}.m-3 .blogvote .options ul .col0{width:230px;margin-right:10px;margin-top:-3px;_margin-top:-5px;line-height:20px}.m-3 .blogvote .options ul .col0 input{_position:relative;_top:3px}.m-3 .blogvote .options ul .col0 label{width:200px;_position:relative;_top:4px}.m-3 .blogvote .options ul .col1{width:190px;height:14px;line-height:14px;;background:none repeat scroll 0 0 #EAEAEA;}.m-3 .blogvote .options ul .col1 .iblock{width:100%;height:16px;vertical-align:middle;}.qing001{margin:0;border:none;}.qing001 .nb-mc{background:none;}.qing001 .nb-mc .cc{width:942px;padding:0;margin:0 auto;}.qing001 .nb-mc .cl{display:none;}.qing001 .nb-mc .cr{display:none;}.qing001 .bh{display:none;}.qing001 .nbw-ryt{background:url(/newpage/images/qingtheme/qing001/blogdetail_cntbg.png) 0 0 repeat-y;}.qing001 .nbw-ryt .left{background:url(/newpage/images/qingtheme/qing001/blogdetail_ftbg.png) bottom left no-repeat;}.qing001 .nbw-ryt .left .lcnt{width:100%;padding:0;margin:0;background:url(/newpage/images/qingtheme/qing001/blogdetail_ttlbg.png) 0 0 no-repeat;}.qing001 .nbw-ryt .left .mcnt{padding:0 30px;}.qing001 .nbw-ryt .left .nbw-bitm{padding:0;}.qing001 .nb-mt{display:none;}.qing001 .nbw-ryt .left .top{display:none;}.qing001 .nbw-ryt .left .nbw-bitm .title{height:31px;padding:30px 0 46px 3px;margin:0;}.qing001 .nbw-ryt .left .nbw-bitm .title .tcnt{color:#fffadc;font-size:24px;font-family:'微软雅黑','黑体',Arial,Helvetica,Sans-Serif;}.qing001 .nbw-ryt .left .nbw-bitm .tdep{padding-top:6px;}.qing001 .comment .case{padding-bottom:40px;}.m-3 .article .douban{float:left;width:200px;margin:0 10px 10px 0;font-size:12px;}.m-3 .article .douban .field{padding-top:5px;}.m-3 .article .douban .field .dbyinyue{width:10px;height:8px;border-width:0;}.m-3 .article .douban img{max-width:100%;width:100%;border-color:#e9e9e9;display:inline-block;border-width:1px;border-style:solid;}.m-3 .article-1 .douban{float:right;width:200px;margin:0 3px 10px 10px;}.m-3 .article-2 .douban{float:left;width:250px;margin:0 -250px 0 0;}.m-3 .article-2 .blog{margin-left:270px;}.m-3 .article-2 .blogc{width:99%;overflow:hidden;}.m-3 .article-3 .douban{float:right;width:250px;margin:0 3px 0 -250px;}.m-3 .article-3 .blog{margin-right:270px;}.m-3 .article-3 .blogc{width:99%;overflow:hidden;}.m-3 .vote_star{overflow:visible;}.m-3 .rateword{display:none;left:88px;width:37px;top:-2px;position:absolute;line-height:23px;}.m-3 .star_d0 .rateword0{display:inline;}.m-3 .star_d1 .rateword1{display:inline;}.m-3 .star_d2 .rateword2{display:inline;}.m-3 .star_d3 .rateword3{display:inline;}.m-3 .star_d4 .rateword4{display:inline;}.m-3 .star_d5 .rateword5{display:inline;}.m-3 .nbw-act .blogsep{margin:0 2px}.m-3 .zihao{position:relative;cursor:default;}.m-3 .zihaoshow{position:absolute;width:26px;top:-57px;left:-3px;padding:0 0 3px;line-height:18px;}.m-3 .zihaoshow span{display:block;text-align:center;cursor:pointer;}.m-3 .zihaoc{border-style:solid;border-width:1px;}.m-3 .mbga{margin-bottom:12px;position:relative;}.m-3 .mbga a{margin-left:20px;}.m-3 .mbgai{position:absolute;top:-1px;width:17px;background:url(/newpage/images/microblog.png?1) no-repeat;_background:none transparent;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='http://b2.bst.126.net/newpage/images/microblog.png');_zoom:1;} </style>
  
  <link href="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/prettify.css" type="text/css" rel="stylesheet">
  <script src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/relatedItems.txt" type="text/javascript"></script><style type="text/css">.ui-5419195464 .zcvr,.ui-5419195464 .zhnt{display:none;position:fixed;_position:absolute;z-index:80;} .ui-5419195464 .zcvr{top:0;left:0;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);} .ui-5419195464 .zhnt{top:5px;right:5px;padding:4px;color:#000;background:#ffffae;z-index:120;}.ui-4219109945-hack{position:absolute;z-index:99;} .ui-4219109945{position:absolute;z-index:100;border:1px solid #97abc9;background-color:#fff;}.ui-3175473621-hack{position:absolute;z-index:99;} .ui-3175473621-cover{position:absolute;top:0;left:0;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);z-index:10;} .ui-3175473621{position:absolute;top:0;left:0;z-index:100;text-align:center;border:1px solid #97abc9;background-color:#fff;} .ui-3175473621 .ztbr{height:30px;line-height:30px;text-align:left;background-color:#5e9ff7;font-size:14px;font-weight:bold;color:#fff;} .ui-3175473621 .zmov{cursor:move;} .ui-3175473621 .zttl{width:85%;padding-left:10px;} .ui-3175473621 .zcls{position:absolute;top:5px;right:10px;width:20px;height:20px;overflow:hidden;cursor:pointer;z-index:5;} .ui-3175473621 .zcnt{padding:10px;min-height:100px;_height:100px;font-size:12px;} .ui-3175473621 .zext{display:none;} .ui-3175473621.js-zncls-102 .zcls{display:none;}.zbwin{color:#000;border:1px solid #aaa;background-color:#fff;} .zbwin .zcls{top:8px;background:url(http://b.bst.126.net/common/widget/wincls.gif) no-repeat 2px center;text-indent:50px;} .zbwin .ztbr{height:35px;line-height:35px;color:#000;background:url(http://b.bst.126.net/common/widget/winbar.gif) repeat-x;} .zbwin .zact{margin:10px 0;text-align:center;} .zbwin .ztxt{height:1.3em;padding-top:3px;} .zbwin .zbtn{height:28px;padding:0 8px;font-size:14px;cursor:pointer;} .zbwin .zbtnok{font-weight:bold;} .zbwin .zbtncc{margin-left:20px;}.ui-7844597806{position:relative;zoom:1;text-align:left;} .ui-7844597806-hack{position:absolute;z-index:99;} .ui-7844597806 .zcom{width:200px;border:1px solid #aaa;} .ui-7844597806 .zcse{visibility:hidden;position:absolute;top:20px;left:0;background:#fff;} .ui-7844597806 .zitm{width:100%;height:20px;line-height:20px;cursor:default;} .ui-7844597806 .zitm.js-zhvr-900{background-color:#316ac5;} .ui-7844597806 .zcse .js-login-hovered{background-color:#ddd;color:#fff;}.ui-9100818184 .iblock{display:-moz-inline-box;display:inline-block;*display:inline;zoom:1;} .ui-9100818184 .fs1{font-size:14px;} .ui-9100818184 .fw1{font-weight:bold;} .ui-9100818184 .noselect{user-select:none;-moz-user-select:none;-webkit-user-select:none;-khtml-user-select:none;-o-user-select:none;} .ui-9100818184 .zcvr,.ui-9100818184 .zhnt{display:none;position:fixed;_position:absolute;z-index:80;} .ui-9100818184 .zcvr{top:0;left:0;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);} .ui-9100818184 .zhnt{position:absolute;height:36px;line-height:36px;top:5px;right:5px;padding:11px 10px 11px 4px;color:#000;z-index:120;vertical-align:middle;} .ui-9100818184 .showhint-0{background-image:url(/common/showhint/hintbg.png);background-repeat:no-repeat;background-position:-7px -1px;_background-image:url(/common/showhint/hintbg2.png);} .ui-9100818184 .showhint-1{background-image:url(/common/showhint/hintbg_right.png);background-repeat:no-repeat;background-position:0px 0px;width:20px;_background-image:url(/common/showhint/hintbg2_right.png);} .ui-9100818184 .showhint-2{background-image:url(/common/showhint/hinticon.png);background-repeat:no-repeat;} .ui-9100818184 .showhint-2-0{background-position:0 1px;} .ui-9100818184 .showhint-2-1{background-position:0 -45px;} .ui-9100818184 .showhint-2-2{background-position:0 -90px;} .ui-9100818184 .showhint-3{background-image:url(/common/showhint/loading.gif);background-repeat:no-repeat;} .ui-9100818184 .typeicon{width:25px;height:25px;padding:4px 5px 7px 6px;margin:0 10px 0 15px;line-height:25px;vertical-align:middle;} .ui-9100818184 .typeicon .loading{width:25px;height:25px;line-height:25px;vertical-align:middle;} .ui-9100818184 .bg_right{position:absolute;right:-20px;top:2px;z-index:120;display:block;height:36px;padding:11px 0 11px 0;} .ui-9100818184 .txthint{vertical-align:middle;} .ui-9100818184 .showhint-bg{position:absolute;right:0;top:0;width:200px;height:30px;background:#f5f5f5;border:1px solid #ccc;} .ui-9100818184-hack{display:none;position:absolute;z-index:101;width:100%;height:100%;overflow:hidden;}.ui-6654597115-hack,.ui-6654597115-cvr-hack{position:absolute;z-index:99;} .ui-6654597115-cover{position:absolute;top:-99999px;left:-99999px;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);z-index:10;} .ui-6654597115{position:absolute;top:-99999px;left:-99999px;z-index:100;text-align:center;} .ui-6654597115 .ztbr{height:30px;line-height:30px;text-align:left;background-color:#5e9ff7;font-size:14px;font-weight:bold;/*color:#fff;*/} .ui-6654597115 .zmov{cursor:move;} .ui-6654597115 .zttl{width:85%;padding-left:10px;} .ui-6654597115 .zcls{position:absolute;top:5px;right:10px;width:20px;height:20px;overflow:hidden;cursor:pointer;z-index:5;} .ui-6654597115 .zcnt{padding:10px;min-height:30px;_height:30px;font-size:12px;background-color:#fff;} .ui-6654597115 .zext{display:none;} .ui-6654597115.js-zncls-102 .zcls{display:none;}.nbwindow{color:#000;border:1px solid #beb8ab;} #blog-163-com #blog-163-com-layer .nbwindow{/*height:auto;*/min-height:100px;border:1px solid #beb8ab;} .nbwindow .js-hide{display:none;} .nbwindow .zttl{font-size:12px;} .nbwindow .txtclose{position:absolute;top:4px;_top:5px;right:11px;_right:9px;width:10px;height:10px;line-height:10px;} .nbwindow .zcls{right:12px;top:-1px;width:32px;height:18px;line-height:18px;background:#beb8ab url(http://b.bst.126.net/common/nbwindow/close_01.png) no-repeat 0px center;color:#646464;text-indent:1px;_text-indent:2px;} .nbwindow .zclshover{background:#cd3503 url(http://b.bst.126.net/common/nbwindow/close_02.png) no-repeat 0px center;color:#ffe9e1;} .nbwindow .zclsmousedown{background:#ae2601 url(http://b.bst.126.net/common/nbwindow/close_03.png) no-repeat 0px center;color:#ffd9cb;} .nbwindow .ztbr{height:23px;line-height:23px;margin:0 auto;color:#000;background:#e8e8e6 url(http://b.bst.126.net/common/nbwindow/top_bg.png) bottom repeat-x;} .nbwindow .zact{margin:10px 0;text-align:center;} .nbwindow .ztxt{height:1.3em;padding-top:3px;} .nbwindow .zbtnbar{height:31px;line-height:31px;background:#eee;} .nbwindow .zbtn{height:28px;padding:0 8px;font-size:14px;cursor:pointer;} .nbwindow .zbtnok{font-weight:bold;} .nbwindow .zbtncc{margin-left:20px;} #blog-163-com .nbwindow .nbwinwrap .nbwinbtnbar{position:absolute;right:-2px;bottom:0;z-index:101;height:22px;line-height:22px;padding:4px 14px 4px 0;margin:0;border:none;background:none;} #blog-163-com .nbwindow .nbwinwrap .nbwinbtnbar .nbwinbtn{height:22px;padding:0px 10px;margin:0 0 0 10px;line-height:22px;*line-height:20px;font-size:12px;font-weight:normal;cursor:pointer;text-align:center;} #blog-163-com .nbwindow .nbwinwrap .nbwinclear{height:0;padding:0;margin:0;border:none;} #blog-163-com .nbwindow .nbwinwrap .nbwinhide{display:none;} #blog-163-com #blog-163-com-layer .nbwinascard{border:none;} .nbwinascard .zcls{display:none;} .nbwinascard .ztbr{display:none;} .nbwinascard .zcnt{padding:0;background:none;} .nbwinascard .zbtnbar{display:none;} #blog-163-com #blog-163-com-layer .nbwinautoheight{height:auto;} #nbwinNeedScroll{position:absolute;z-index:110;overflow:auto;background:url(http://b.bst.126.net/common/empty.png);} .nbwinzindex{position:relative;z-index:120;} .nbwinzindex .zcse{z-index:120;} #blog-163-com .nbwindow .nbwinwrap .nbwinlogin{width:230px;padding-bottom:5px;} #blog-163-com .nbwindow .nbwinwrap .nbwinlogin .nbwinloginreg{*height:16px;*line-height:16px;*padding-top:6px;} .nbwindow .zext{display:block;position:absolute;} .nbwindow .zext0{left:0;top:-6px;width:100%;height:6px;background:url(http://b.bst.126.net/common/nbwindow/top_bg.png) top repeat-x;} .nbwindow .zext1{left:0;bottom:-6px;width:100%;height:6px;background:url(http://b.bst.126.net/common/nbwindow/bottom_bg.png) bottom repeat-x;} .nbwindow .zext2{left:-6px;top:0;width:6px;height:100%;background:url(http://b.bst.126.net/common/nbwindow/left_bg.png) left repeat-y;} .nbwindow .zext3{right:-6px;top:0;width:6px;height:100%;background:url(http://b.bst.126.net/common/nbwindow/right_bg.png) right repeat-y;} .nbwindow .zext4{left:-6px;top:-6px;width:12px;height:29px;background:url(http://b.bst.126.net/common/nbwindow/left_top.png) no-repeat;} .nbwindow .zext5{right:-6px;top:-6px;width:12px;height:29px;background:url(http://b.bst.126.net/common/nbwindow/right_top.png) no-repeat;} .nbwindow .zext6{left:-6px;bottom:-6px;width:12px;height:37px;background:url(http://b.bst.126.net/common/nbwindow/left_bottom.png) no-repeat;} .nbwindow .zext7{right:-6px;bottom:-6px;width:12px;height:37px;background:url(http://b.bst.126.net/common/nbwindow/right_bottom.png) no-repeat;} .nbwinascard .zext{display:none;} .ui-8499495073{position:relative;zoom:1;text-align:left;} .ui-8499495073-hack{position:absolute;z-index:99;} .ui-8499495073 .zcom{width:200px;border:1px solid #aaa;} .ui-8499495073 .zcse{visibility:hidden;position:absolute;top:20px;left:0;background:#fff;} .ui-8499495073 .zitm{width:100%;height:20px;line-height:20px;cursor:default;} .ui-8499495073 .zitm.js-zhvr-900{background-color:#316ac5;} .ui-8499495073 .zcse .js-login-hovered{background-color:#ddd;color:#fff;}.zibox{position:relative;zoom:1;} .zibox .zitm{float:left;margin:-1px 0 0 -1px;overflow:hidden;text-indent:200px;border:1px solid #e5e5e1;cursor:pointer;background-repeat:no-repeat;zoom:1;} .zibox .zitm:hover,.zibox .js-zhvr-110{position:relative;border-color:#000;}.zibox .zitm.a{width:30px;height:30px;line-height:30px;}.zibox .a0{background-position:-0px -0px;}.zibox .a1{background-position:-30px -0px;}.zibox .a2{background-position:-60px -0px;}.zibox .a3{background-position:-90px -0px;}.zibox .a4{background-position:-120px -0px;}.zibox .a5{background-position:-150px -0px;}.zibox .a6{background-position:-180px -0px;}.zibox .a7{background-position:-210px -0px;}.zibox .a8{background-position:-240px -0px;}.zibox .a9{background-position:-270px -0px;}.zibox .a10{background-position:-0px -30px;}.zibox .a11{background-position:-30px -30px;}.zibox .a12{background-position:-60px -30px;}.zibox .a13{background-position:-90px -30px;}.zibox .a14{background-position:-120px -30px;}.zibox .a15{background-position:-150px -30px;}.zibox .a16{background-position:-180px -30px;}.zibox .a17{background-position:-210px -30px;}.zibox .a18{background-position:-240px -30px;}.zibox .a19{background-position:-270px -30px;}.zibox .a20{background-position:-0px -60px;}.zibox .a21{background-position:-30px -60px;}.zibox .a22{background-position:-60px -60px;}.zibox .a23{background-position:-90px -60px;}.zibox .a24{background-position:-120px -60px;}.zibox .a25{background-position:-150px -60px;}.zibox .a26{background-position:-180px -60px;}.zibox .a27{background-position:-210px -60px;}.zibox .a28{background-position:-240px -60px;}.zibox .a29{background-position:-270px -60px;}.zibox .a30{background-position:-0px -90px;}.zibox .a31{background-position:-30px -90px;}.zibox .a32{background-position:-60px -90px;}.zibox .a33{background-position:-90px -90px;}.zibox .a34{background-position:-120px -90px;}.zibox .a35{background-position:-150px -90px;}.zibox .a36{background-position:-180px -90px;}.zibox .a37{background-position:-210px -90px;}.zibox .a38{background-position:-240px -90px;}.zibox .a39{background-position:-270px -90px;}.zibox .a40{background-position:-0px -120px;}.zibox .a41{background-position:-30px -120px;}.zibox .a42{background-position:-60px -120px;}.zibox .a43{background-position:-90px -120px;}.zibox .a44{background-position:-120px -120px;}.zibox .a45{background-position:-150px -120px;}.zibox .a46{background-position:-180px -120px;}.zibox .a47{background-position:-210px -120px;}.zibox .a48{background-position:-240px -120px;}.zibox .a49{background-position:-270px -120px;}.zibox .a50{background-position:-0px -150px;}.zibox .a51{background-position:-30px -150px;}.zibox .a52{background-position:-60px -150px;}.zibox .a53{background-position:-90px -150px;}.zibox .a54{background-position:-120px -150px;}.zibox .a55{background-position:-150px -150px;}.zibox .a56{background-position:-180px -150px;}.zibox .a57{background-position:-210px -150px;}.zibox .a58{background-position:-240px -150px;}.zibox .a59{background-position:-270px -150px;}.zibox .zitm.b{width:61px;height:60px;line-height:60px;}.zibox .b0{background-position:-0px -0px;}.zibox .b1{background-position:-60px -0px;}.zibox .b2{background-position:-120px -0px;}.zibox .b3{background-position:-180px -0px;}.zibox .b4{background-position:-240px -0px;}.zibox .b5{background-position:-0px -60px;}.zibox .b6{background-position:-60px -60px;}.zibox .b7{background-position:-120px -60px;}.zibox .b8{background-position:-180px -60px;}.zibox .b9{background-position:-240px -60px;}.zibox .b10{background-position:-0px -120px;}.zibox .b11{background-position:-60px -120px;}.zibox .b12{background-position:-120px -120px;}.zibox .b13{background-position:-180px -120px;}.zibox .b14{background-position:-240px -120px;} .zibox .zprv{position:absolute;top:0;left:0;background:#fff no-repeat center center;border:1px solid #888;} .zibox div.zprv{width:60px;height:60px;}.ui-2780957195{width:310px;padding:5px;background:#e5e5e1;border:1px solid #888;} .ui-2780957195 .zibox{height:190px;} .ui-2780957195 .zibox.js-page-0 .zitm{background-image:url(http://b.bst.126.net/common/portrait/face/face-0.png);} .ui-2780957195 .zibox.js-page-1 .zitm{background-image:url(http://b.bst.126.net/common/portrait/face/face-1.png);} .ui-2780957195 .zpgr{line-height:20px;padding:3px;font-size:12px;text-align:right;} .ui-2780957195 .zpgr .ztag{color:#000;cursor:pointer;} .ui-2780957195 .zpgr .zsep{margin:0 3px;} .ui-2780957195 .zpgr .js-zdsab-307{color:#777;cursor:default;}.ui-1076490637{font-size:12px;text-align:left;} .ui-1076490637 .zbrd{border-width:1px;border-style:solid;} .ui-1076490637 .zbgp{background:url(http://b.bst.126.net/common/icon.png) no-repeat;} .ui-1076490637 .zcnt{height:100px;overflow:hidden;} .ui-1076490637 .zcnt iframe,.ui-1076490637 .zcnt textarea{width:100%;height:100%;border:0;} .ui-1076490637 .zcnt textarea{overflow:auto;} .ui-1076490637 .zhnd{cursor:pointer;} .ui-1076490637 .zbtn{position:relative;height:30px;line-height:30px;zoom:1;text-align:right;} .ui-1076490637 .zbok{_margin-top:4px;} .ui-1076490637 .zfce{position:absolute;left:0;top:5px;width:20px;height:20px;cursor:pointer;background-position:0 1px;} .ui-1076490637 .zvcd{position:absolute;top:0;right:80px;} .ui-1076490637 .zvcd *{vertical-align:middle;} .ui-1076490637 .zvcd img{width:40px;height:24px;margin:0 3px;cursor:pointer;} .ui-1076490637 .zvcd span{text-decoration:underline;cursor:pointer;} .ui-1076490637 .zvcd input{width:35px;padding:2px 0;} .ui-1076490637 .zmsg{line-height:20px;} .ui-1076490637 .zmsg .zicn{width:25px;height:20px;background-position:5px -58px;} .ui-1076490637 .zprt{left:0;top:30px;}.ui-2340844961{font-size:12px;padding-bottom:3px;text-align:center;} .ui-2340844961 .frg{display:none;font-weight:bold;} .ui-2340844961 .iblock{height:22px;line-height:22px;padding:1px 8px;margin:0 2px;cursor:pointer;text-decoration:underline;} .ui-2340844961 .pgi:hover,.ui-2340844961 .pgi.js-zhvr-258{padding:0 7px;border-width:1px;border-style:solid;} .ui-2340844961 .pgi.js-zslt-987{padding:1px 8px;border-width:0;background-color:transparent;font-weight:bold;cursor:default;text-decoration:none;} .ui-2340844961 .pgb.js-znpg-097{visibility:hidden;} .ui-2340844961.js-zfrg-6540 .frg{display:none;} .ui-2340844961.js-zfrg-6541 .frg.fgn{display:inline;} .ui-2340844961.js-zfrg-6542 .frg.fgp{display:inline;} .ui-2340844961.js-zfrg-6543 .frg{display:inline;}.lightphotowin{width:450px;height:365px;text-align:left;} .lightphotowin .js-hide{display:none;} .lightphotowin .zcnt{position:relative;z-index:100;padding:0 22px 20px 22px;} .lightphotowin .zbtnbar{display:none;} .lightphotowin .lightphotobox .toparea{height:28px;line-height:28px;padding:14px 0;} .lightphotowin .lightphotobox .uploadarea{position:relative;zoom:1;height:28px;line-height:28px;} .lightphotowin .lightphotobox .uploadfile{position:absolute;left:161px;top:1px;width:58px;height:26px;opacity:0;filter:alpha(opacity=0);overflow:hidden;text-align:left;background:none;} .lightphotowin .lightphotobox .uploadform{height:28px;} .lightphotowin .lightphotobox .uploadform .iptfile{position:absolute;left:-155px;top:-3px;height:30px;cursor:pointer;opacity:0;filter:alpha(opacity=0);} .lightphotowin .lightphotobox .btnupload{width:58px;height:25px;line-height:25px;padding:0;margin-right:22px;background:#ff7700;color:#fff;border:1px solid #bf7331;} .lightphotowin .lightphotobox .tips-fc1{color:#7d7d7d;} .lightphotowin .lightphotobox .error-fc1{color:#990000;} .lightphotowin .lightphotobox .loadingarea{text-align:center;} .lightphotowin .lightphotobox .loading{width:25px;height:25px;line-height:25px;background:url("/common/showhint/loading.gif") no-repeat;} .lightphotowin .lightphotobox .iptttl{width:99%;height:28px;line-height:28px;padding:1px;margin-bottom:10px;} .lightphotowin .lightphotobox .txtarea{width:99%;height:128px;padding:1px;} .lightphotowin .lightphotobox .blogclass{padding:20px 0 15px 0;} .lightphotowin .lightphotobox .selclass{width:180px;padding:1px;} .lightphotowin .lightphotobox .previewarea{padding:20px 0;} .lightphotowin .lightphotobox .imgwrap{width:406px;height:406px;} .lightphotowin .lightphotobox .previmg{display:block;margin:0 auto;border:none;} .lightphotowin .lightphotobox .prevbtm{padding-top:3px;} .lightphotowin .lightphotobox .modify{color:#21759B;} .lightphotowin .lightphotobox .vcdarea{height:22px;line-height:22px;padding-bottom:15px;vertical-align:middle;} .lightphotowin .lightphotobox .valid{width:60px;height:18px;line-height:18px;padding:1px;} .lightphotowin .lightphotobox .valid,.lightphotowin .lightphotobox .vcdimg{height:22px;margin-right:5px;} .lightphotowin .lightphotobox .showfileaddr{width:80px;height:18px;margin-right:16px;} .lightphotowin .lightphotobox .imgname{display:block;width:360px;overflow:hidden;text-overflow:ellipsis;word-break:break-all;} .ui-1131962117{display:none;margin-right:6px;} .ui-1131962117 .miniBlogSetInfo{width:16px;height:16px;} .ui-1131962117 .chkMiniBlogSetInfo{float:left;position:relative;width:16px;height:16px;cursor:pointer;} .ui-1131962117 .chkMiniBlogSetInfo em{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:hidden;text-indent:-2000px;background:url("/newpage/images/setting/synminiblog/synicon8.png") -40px -21px no-repeat;} .ui-1131962117 .chkMiniBlogSetInfo b{display:none;position:absolute;bottom:-1px;right:-2px;z-index:5;clear:both;width:8px;height:8px;overflow:hidden;cursor:pointer;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -42px no-repeat;} .ui-1131962117 .js-checked em{background-position:-40px 0;} .ui-1131962117 .js-checked b{display:block;} .ui-8116533036{display:none;margin-right:6px;} .ui-8116533036 .miniBlogSetInfo{width:16px;height:16px;} .ui-8116533036 .chkMiniBlogSetInfo{float:left;position:relative;width:16px;height:16px;cursor:pointer;} .ui-8116533036 .chkMiniBlogSetInfo em{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:hidden;text-indent:-2000px;background:url("/newpage/images/setting/synminiblog/synicon8.png") -20px -20px no-repeat;} .ui-8116533036 .chkMiniBlogSetInfo b{display:none;position:absolute;bottom:-1px;right:-2px;z-index:5;clear:both;width:8px;height:8px;overflow:hidden;cursor:pointer;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -42px no-repeat;} .ui-8116533036 .js-checked em{background-position:-20px 0;} .ui-8116533036 .js-checked b{display:block;} .ui-8226556319{position:relative;float:left;text-align:left;cursor:pointer;} .ui-8226556319,.ui-8226556319 .iblock{height:18px;line-height:18px;} .ui-8226556319 .ztxt{margin-left:5px;} .ui-8226556319 .zdwn{width:18px;text-align:center;} .ui-8226556319 .zlst{visibility:hidden;position:absolute;top:18px;left:-1px;width:100%;max-height:180px;overflow:auto;overflow-x:hidden;} .ui-8226556319 .zlst .zitm{padding:0 5px;height:18px;line-height:18px;cursor:pointer;} .ui-8226556319{font-size:12px;} .ui-8226556319,.ui-8226556319 .zlst{border:1px solid #7f9db9;} .ui-8226556319 .zlst .zitm{background-color:#fff;} .ui-8226556319 .zlst .zitm:hover,.ui-8226556319 .slst .item.js-zhvr-910{color:#fff;background-color:#002080;}.lightwin{width:680px;text-align:left;} .lightwin .zbtnbar{display:none;}.goodnighttip{width:420px;text-align:left;} .goodnighttip .box{height:90px;*height:100px;} .goodnighttip input{position:relative;margin:0 4px 0 0;top:1px;} .goodnighttip .imgwrap{padding-right:10px;margin-right:0px;} .goodnighttip .desc{margin-left:0px;line-height:20px;} .goodnighttip .key{font-size:14px;color:#f60;} .ui-6491265829{margin-right:6px;} .ui-6491265829 .miniBlogSetInfo{width:16px;height:16px;} .ui-6491265829 .chkMiniBlogSetInfo{float:left;position:relative;width:16px;height:16px;cursor:pointer;} .ui-6491265829 .chkMiniBlogSetInfo em{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:hidden;text-indent:-2000px;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -20px no-repeat;} .ui-6491265829 .chkMiniBlogSetInfo b{display:none;position:absolute;bottom:-1px;right:-2px;z-index:5;clear:both;width:8px;height:8px;overflow:hidden;cursor:pointer;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -42px no-repeat;} .ui-6491265829 .js-checked em{background-position:0 0;} .ui-6491265829 .js-checked b{display:block;} .grouprecommendwin{width:355px;text-align:left;} .grouprecommendwin .box{position:relative;max-height:200px;_height:200px;overflow-x:hidden;overflow-y:auto;} .grouprecommendwin ul{overflow:hidden;margin:0;padding:0 0 8px 0;list-style:none;background-color:#FFF;} .grouprecommendwin .selected{background:#ECECEC} .grouprecommendwin li{overflow:hidden;margin:0;padding:0;height:28px;line-height:28px} .grouprecommendwin .groupitem{position:relative;zoom:1;padding-left:0;cursor:pointer;} .grouprecommendwin .groupicon{width:25px;height:20px;line-height:20px;padding:2px 0 2px 5px;} .grouprecommendwin .groupicon img{width:20px;height:20px;padding:0;margin:0;border:none;} .grouprecommendwin .groupname{width:150px;height:28px;line-height:28px;color:#5872a7;} </style></head>
<body onload="prettyPrint()" id="blog-163-com" class="nb-body nb-inr nb-prv">
  <!--[if lte IE 6]><div id="blog-163-com-ie6bodywrap" class=""><![endif]-->
    <!--[if lte IE 6]><div id="blog-163-com-ie6body" class="nb-body"><![endif]-->

<div class="nb-nbar clearfix" id="blog-163-com-topbar">
  <div class="pl fl clearfix">
  <div id="" class="nbw-im fl im im0">
    <a rel="nofollow" class="lbl bd ia noul " href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://www.163.com/" target="_blank" hidefocus="true"><span class="tx">网易</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://news.163.com/">
            新闻
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://t.163.com/">
            微博
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://email.163.com/">
            邮箱
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://photo.163.com/">
            相册
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://yuedu.163.com/">
            阅读
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://www.youdao.com/">
            有道
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://photo.163.com/pp/square/">
            摄影
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://aipai.163.com?from=163blog">
            爱拍
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://note.youdao.com/?vendor=163blog">
            云笔记
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://fm.163.com/?fmblogzx0628">
            闪电邮
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://m.123.163.com/?frombkcp">
            手机邮
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://yxp.163.com/">
            印像派
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://hi.163.com/?from=bkcp">
            游戏江湖
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&amp;url=http://sitemap.163.com/">
            更多
          </a>
        
    </div>
  </div>
                               
    <span style="display:none;margin-left:0;" class="fl iblock space icn1 icn1-4">&nbsp;</span>
    
  <div id="" class="nbw-im fl im im10">
    <a class="lbl bd ia noul " href="http://blog.163.com/?frompersonalbloghome" target="_blank" hidefocus="true"><span class="tx">博客</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome">
            手机博客
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/clone/clone.html?frompersonalbloghome">
            博客搬家
          </a>
          <a target="_blank" class="itm noul youcai " hidefocus="true" href="http://blog.163.com/vip.do?frompersonalbloghome">
            博客VIP服务
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201082863728829/?frompersonalbloghome">
            LiveWriter写博
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201092713253500/?frompersonalbloghome">
            word写博
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/services/mailblog.html?frompersonalbloghome">
            邮件写博
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome">
            短信写博
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/showMultiUser.do?frompersonalbloghome">
            群博客
          </a>
          <a target="_blank" class="itm noul youcai " hidefocus="true" href="http://blog.163.com/BLOG_YOUCAI/">
            博客油菜地
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/ht/?frompersonalbloghome">
            博客话题
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/hot/history/?frompersonalbloghome">
            博客热点
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://q.163.com/#home?frompersonalbloghome">
            博客圈子
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/findFriend.do?type=5?frompersonalbloghome">
            找朋友
          </a>
        
    </div>
  </div>

    
    <div class="nbw-im fl im1 im explore"><a class="lbl bd ima spy" href="http://blog.163.com/public/explore/?frompersonalbloghome">发现</a></div>
    <div class="nbw-im fl im1 im bloggroup"><a class="lbl bd ima spy" href="http://blog.163.com/g/?frompersonalbloghome">小组</a></div>
    <div class="nbw-im fl im1 im customtheme"><a class="lbl bd ima spy" href="http://blog.163.com/public/theme/?frompersonalbloghome">风格</a></div>
    <div class="nbw-im fl im1 im seebyway"><a rel="nofollow" title="随便看看" class="lbl bd ima spy" href="http://blog.163.com/randomUser.do"><span>&nbsp;</span></a></div>
    
    <span style="display:none;" class="fl iblock space icn1 icn1-4">&nbsp;</span>
    <div id="topbar_randShowArea" class="fl">
      <div class="nbw-im fl im1 im randtag"><a style="width: 142px;" target="_blank" class="lbl bd ima moveblog randshow" href="http://istyle.163.com/" onclick="window.open('http://istyle.163.com/?act=idpistyle_20120604_01');return false;">网易真人搭配社区iStyle</a></div>
      <div class="nbw-im fl im1 im randtag phide"><a style="width: 110px;" target="_blank" class="lbl bd ima moveblog randshow" href="http://www.lofter.com/" onclick="window.open('http://www.lofter.com/reg?from=blog');return false;">网易轻博客LOFTER</a></div>
    </div>
  </div>
  <div class="fr pr clearfix">
    <div id="topbar_loginAndReg" class="fr">
      <a rel="nofollow" style="margin-left: 10px; color: rgb(255, 119, 0);" class="iblock fr ima" href="http://reg.163.com/reg/reg.jsp?product=blog&amp;url=http://blog.163.com/ntesRegBlank.html&amp;loginurl=http://blog.163.com/" target="_blank">创建博客</a>
      <a rel="nofollow" class="iblock fr ima ztag" href="#">登录</a>
      <span class="fr iblock space icn1 icn1-4 spx">&nbsp;</span>
      <div id="topbar_followArea" class="nbw-im fr"><span class="lbl bd ima followit fl ztag"><span class="fl addicon">&nbsp;</span><span class="fl">加关注</span></span></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  (function(){
      var e = document.getElementById('blog-163-com-main');
      if(!!e) e.parentNode.insertBefore(document.getElementById('blog-163-com-topbar'),e);
      e = document.getElementById('blog-notice-email');
      if(!!e) window.setTimeout(function(){e.style.display='';},50);
  })()
</script>
<div class="blogtoptips phide" id="blog-163-com-toptips">
 <div class="blogtoptipswrap">
    <div id="newbulletinstip" class="newbulletinstip phide">
    <a class="lnknews fc03 m2a tiptag phide" href="" target="_blank"></a><span class="txtnews tiptag phide"></span>&nbsp;&nbsp;&nbsp;<a class="fc03 ul nextorprevnews tiptag phide" href="" hidefocus="true">显示下一条</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 ul close tiptag" href="" hidefocus="true">关闭</a>
  </div>
 </div>
    <div id="$_faxiantip" class="faxiantip phide">
      <div>
	    <a class="m2a iblock" href="http://blog.163.com/public/explore/?fromblogbanner" target="_blank"></a>
	    <span class="faxiantag m2a"></span>
      </div>
    </div>
    <div id="$_guanggaotip" class="guanggaotip phide">
      <div>
	    
	    <span class="guanggaotag m2a"></span>
      </div>
    </div>
    <div id="$_lofterInviteTip" class="lofterInviteTip phide">
      <div>
	    <a class="m2a iblock" href="http://www.lofter.com/invite/163blog/?email=" target="_blank"></a>
	    <span class="lofterInviteTag m2a"></span>
      </div>
    </div>
</div>  <div class="nb-wrap wsy" id="blog-163-com-main"><div class="nb-are nb-top">
  <div class="wkg h" id="blog-163-com-banner">
    
    <div class="t">
      <h1 class="n c"><span class="ztag pre">hjz51的博客</span></h1>
      <p class="d c"><span class="ztag pre"></span></p>
    </div>
    <div class="f h ztag">&nbsp;</div>
    <a class="x" hidefocus="true" target="_blank" href="#"><span class="xx ztag"></span></a>
  </div>
</div><div class="nb-are nb-nav">
  <div class="wkg">
    <div class="c h">
      <h2>导航</h2>
      <ul class="noul clearfix">
                
	        <li class="w w0">
	          <a class="i i0 fc01 h" hidefocus="true" href="http://hjz5511.blog.163.com/">首页</a>
	        </li>
	        <li class="w w1 selected">
	          <a class="i i1 fc01 h" hidefocus="true" href="http://hjz5511.blog.163.com/blog/">日志</a>
	        </li>
	        <li class="w w2">
	          <a class="i i2 fc01 h" hidefocus="true" href="http://hjz5511.blog.163.com/album/">相册</a>
	        </li>
	        <li class="w w5">
	          <a class="i i5 fc01 h" hidefocus="true" href="http://hjz5511.blog.163.com/friends/">博友</a>
	        </li>
	        <li class="w w6">
	          <a class="i i6 fc01 h" hidefocus="true" href="http://hjz5511.blog.163.com/profile/">关于我</a>
	        </li>
      </ul><!--
 --></div>
    <div class="l h">&nbsp;</div>
    <div class="r h">&nbsp;</div>
  </div>
</div>  <div class="nb-are nb-smt"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
  <div class="nb-are nb-cnt">
    <div class="wkg">
      <div class="c wc h clearfix " id="blog-163-com-container">
  <div class="nb-mdl lcr m-3 " id="-3">
  <div class="nb-mt lcr th fc02">
    <div class="c tc th lcr"><h2 class="thide nb-jsc mdl_t_t">日志</h2></div>
    <div class="r tm th nb-jsc"></div>
    <div class="l tl th">&nbsp;</div>
    <div class="r tr th">&nbsp;</div>
  </div>
    <div class="nb-mc lcr">
      <div class="c cc lcr nb-jsc"><script>
function g_onSuggestedReadingImgLoad(_img){
    var image = new Image();
    image.src = _img.src;
    var _width = 90;
    var _height = 90;
    if(image.width > image.height){
    	_img.style.marginLeft = -Math.floor((image.width*(_height/image.height)-_width)/2)+'px';
    	_img.style.height = _height+'px';
    }else {
    	_img.style.width = _width+'px';
    	_img.style.marginTop = -Math.floor((image.height*(_width/image.width)-_height)/2)+'px';
    }
    _img.style.display = 'block';
}
</script>
<div class="nbw-ryt ztag clearfix js-fix-098">
  <div class="right bdwl bds0 bdc0"><div class="cnt ztag"></div></div>
  <div class="left">
     <div class="lcnt bdwr bds0 bdc0 ">   
      <div id="$_divTopLink" class="top fc03 bdwb bdc0 bds2 clearfix">
        <span class="ilft iblock icn0 icn0-620">&nbsp;</span>
        <div class="pleft thide"><a class="m2a" href="http://hjz5511.blog.163.com/blog/static/1967640932011919112252994/">FreeSWITCH 与 Asterisk 的比较</a></div>
        <span class="irgt iblock icn0 icn0-619">&nbsp;</span>
        <div class="pright thide"><a class="m2a" href="http://hjz5511.blog.163.com/blog/static/19676409320119195922183/">SIP 模块 mod_sofia</a></div>
     </div> 
     <div class="mcnt ztag"> 
      <div class="nbw-bitm bdwb bds2 bdc0 ">
        <div class="multicntwrap">
	      <div class="multicnt">
	      	<div>
		      <h3 class="title pre fs1"><span class="tcnt">SIP 基础知识</span>&nbsp;&nbsp;<span class="bgc0 fc07 fw0 fs0"></span></h3>
		      <p class="tdep clearfix nbw-act fc06" style="line-height:20px;">
		        <span class="pleft">
		          
		          <span class="blogsep">2011-10-19 17:02:07</span><span class="blogsep">|&nbsp;&nbsp;分类：</span>
		          <a class="fc03 m2a" href="http://hjz5511.blog.163.com/blog/#m=0&amp;t=1&amp;c=fks_084064092083086071085083087095085095087068082082086074087" title="默认分类">默认分类</a>
		          <span class="blogsep phide" id="$_blogTagTitle">|&nbsp;&nbsp;标签：</span><span class="fc03 phide" id="$_blogTagInfo"></span>
		        </span>
		        <span class="pright fc07 ztag"><span class="blogsep">|</span><span class="zihao fc03" id="$_fontswitch">字号<span class="zihaoshow  phide" id="$_fontsTypes"><span class="zihaoc bdc0"><span class="stag"></span><span class="fc04 stag">大</span><span class="fc04 stag selected js-fcurrent fc05">中</span><span class="fc04 stag">小</span></span></span></span></span><span class="pright pnt fc03" id="$_blog_subscribe"><span class="iblock icn0 icn0-919">&nbsp;</span><a class="m2a">订阅</a></span>
		      </p>
		    </div>
	      </div>
        </div>
        
        <div>
        
        </div>
        
        <div class="nbw-blog-start"></div>
        <div class="bct fc05 fc11 nbw-blog ztag js-fs2"><span style="font-family: 'Trebuchet MS', Arial, Helvetica, sans-serif; line-height: normal;"><p style="line-height: 1.67em;">在
继续学习 FreeSWITCH 之前我们有必要来学习一下 SIP 协议，因为它是 FreeSWITCH 的核心。但即使如此，讲清楚 SIP 
必然需要很大篇幅，本书是关于 FreeSWITCH 的，而重点不是 SIP。因此，我将仅就理解 FreeSWITCH 
必需的一些概念加以通俗的解释，更严肃一些的请参阅其它资料或 RFC（Request For Comments）。</p><h2 style="font-family: Arial, Helvetica, sans-serif; letter-spacing: -1px; color: rgb(0, 0, 139);">SIP 的概念和相关元素</h2><p style="line-height: 1.67em;">会
话初始协议（Session Initiation Protocol）是一个控制发起、修改和终结交互式多媒体会话的信令协议。它是由 
IETF（Internet Engineering Task Force，Internet工程任务组）在 RFC 2543 中定义的。最早发布于
 1999 年 3 月，后来在 2002 年 6 月又发布了一个新的标准 RFC 2361。</p><p style="line-height: 1.67em;">SIP 是一个基于文本的协议，在这一点上与 HTTP 和 SMTP 相似。我们来对比一个简单的 SIP 请求与 HTTP 请求：</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>GET /index.html HTTP/1.1  INVITE sip:seven@freeswitch.org.cn SIP/2.0 </code></pre><p style="line-height: 1.67em;">请
求由三部分组成。在 HTTP 中， GET 指明一个获取资源（文件）的动作，而 /index.html 则是资源的地址，最后是协议版本号。而在 
SIP 中，INVITE 表示发起一次请求，seven@freeswitch.org.cn 为请求的地址，称为 SIP 
URI，最后也是版本号。其中，SIP URI很类似一个电子邮件，其格式为“协议:名称@主机”。与 HTTP 和 HTTPS 相对应，有 SIP 和
 SIPS，后者是加密的；名称可以是一串数字的电话号码，也可以是字母表示的名称；而主机可以是一个域名，也可以是一个IP地址。</p><p style="line-height: 1.67em;">SIP
 是一个对等的协议，类似 
P2P。不像传统电话那样必须有一个中心的交换机，它可以在不需要服务器的情况下进行通信，只要通信双方都彼此知道对方地址（或者，只有一方知道另一方地
址），如下图，bob 给 alice 发送一个 INVITE 请求，说“Hi, 一起吃饭吧...”，alice 说"好的，OK"，电话就通了。</p><p style="line-height: 1.67em;"><img alt="SIP 基础知识 - hjz51 - hjz51的博客" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/4-1.png"></p><p style="line-height: 1.67em;">在
 SIP 网络中，alice 和 bob 都叫做用户代理（UA, User Agent）。UA 是在 SIP 网络中发起或响应 SIP 
处理的逻辑功能。UA是有状态的，也就是说，它维护会话（或称对话）的状态。UA 有两种功能：一种是 UAC（UA 
Client用户代理客户端），它是发起 SIP 请求的一方，如上图的 bob。另一种是 UAS（UA 
Server），它是接受请求并发送响应的一方，如上图中的 alice。由于 SIP 是对等的，如果 alice 呼叫 bob 时（有时候 
alice 也主动叫 bob 一起吃饭），alice 就称为 UAC，而 bob 则执行 UAS的功能。一般来说，UA 都会实现上述两种功能。</p><p style="line-height: 1.67em;">设
想 bob 和 alice 是经人介绍认识的，而他们还不熟悉，bob 想请 alice 
吃饭就需要一个中间人（M）传话，而这个中间人就叫代理服务器（Proxy Server）。还有另一种中间人叫做重定向服务器（Redirect 
Server），它类似于这样的方式工作──中间人 M 告诉 bob，我也不知道 alice 
在哪里，但我老婆知道，要不然我告诉你我老婆的电话，你直接问她吧，我老婆叫 W。这样，M 就成了一个重定向服务器，而他老婆 W 
则是真正的代理服务器。这两种服务器都是 UAS，它们主要是提供一对欲通话的 UA 
之间的路由选择功能。具有这种功能的设备通常称为边界会话控制器（SBC，Service Border Controller）。</p><p style="line-height: 1.67em;">还
有一种 UAS 叫做注册服务器。试想这样一种情况，alice 还是个学生，没有自己的手机，但它又希望 bob 
能随时找到她，于是当她在学校时就告诉中间人 M 说她在学校，如果有事打她可以打宿舍的电话；而当她回家时也通知 M 说有事打家里电话。只要 
alice 换一个新的位置，它就要向 M 重新“注册”新位置的电话，以让 M 能随时找到她，这时候 M 就是一个注册服务器。</p><p style="line-height: 1.67em;">最
后一种叫做背靠背用户代理（B2BUA，Back-to-Back UA）。需要指出，其实 RFC 3261 并没有定义 
B2BUA的功能，它只是一对 UAS 和 UAC的串联。FreeSWITCH 就是一个典型的 B2BUA，事实上，B2BUA 
的概念会贯穿本书始终，所以，在此我们需要多花一点笔墨来解释。</p><p style="line-height: 1.67em;">我们来看上述
故事的另一个版本：M 和 W 是一对恩爱夫妻。M 认识 bob 而 W 认识 alice。M 和 W 
有意搓合两个年轻人，但见面时由于两人太腼腆而互相没留电话号码。事后 bob 相知道 alice 对他感觉如何，于是打电话问 M，M 不认识 
alice，就转身问老婆 W （注意这次 M 没有直接把 W 电话给 bob），W 接着打电话给 alice，alice 说印象还不错，W 
就把这句话告诉 M， M 又转过身告诉 bob。 M 和 W 一个面向 bob，一个对着 alice，他们两个合在一起，称作 
B2BUA。在这里，bob 是 UAC，因为他发起请求；M 是 UAS，因为他接受 bob 的请求并为他服务；我们把 M 和 W 
看做一个整体，他们背靠着背（站着坐着躺着都行），W 是 UAC，因为她又向 alice 发起了请求，最后 alice 是 UAS。其实这里UAC
 和 UAS 的概念也不是那么重要，重要的是要理解这个<strong>背靠背的用户代理</strong>。因为事情还没有完，bob 一听说 
alice 对他印象还不错，心花怒放，便想请 alice 吃饭，他告诉 M， M 告诉 W， W 又告诉 alice，alice 问去哪吃，W 
又只好问 M， M 再问 bob…… 在这对年轻人挂断电话这前， M 和 W 只能“背对背”的工作。</p><p style="line-height: 1.67em;"><img alt="SIP 基础知识 - hjz51 - hjz51的博客" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/4-2.png"></p><p style="line-height: 1.67em;">从
上图可以看出，四个人其实全是 UA。从上面故事可以看出，虽然 FreeSWITCH 是 
B2BUA，但也可以经过特殊的配置，实现一些代理服务器和重定向服务器的功能，甚至也可以从中间劈开，两边分别作为一个普通的 UA 
来工作。这没有什么奇怪的，在 SIP 世界中，所有 UA 都是平等的。具体到实物，则 M 和 W 
就组成了实现软交换功能的交换机，它们对外说的语言是 SIP，而在内部，它们则使用自己家的语言沟通。bob 和 alice 
就分别成了我们常见的软电话，或者硬件的 SIP 电话。</p><h2 style="font-family: Arial, Helvetica, sans-serif; letter-spacing: -1px; color: rgb(0, 0, 139);">SIP 注册</h2><p style="line-height: 1.67em;">不像普通的固定电话网中，电话的地址都是固定的。因特网是开放的，alice 的 UA 可能在家也可能在学校，或者，在世界是任何角落，只要能上网，它就能与世界通信。为了让我们的 FreeSWITCH 服务器能找到它，它必须向服务器进行注册。通常的注册流程是：</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>Alice                          FreeSWITCH    |                                |   |           REGISTER             |   |-------------------------------&gt;|   |   SIP/2.0 401 Unauthorized     |   |&lt;-------------------------------|   |           REGISTER             |   |-------------------------------&gt;|   |   SIP/2.0 200 OK               |   |                                | </code></pre><p style="line-height: 1.67em;">我
们用真正的注册流程进行说明。下面的 SIP 消息是在真正的 FreeSWITCH 中 trace 出来的。其中 FreeSWITCH 服务器的 
IP 地址是 192.168.4.4，使用默认的端口号 5060，在这里，我们使用的是 UDP 协议。 alice 使用的 UAC 是 
Zoiper，端口号是 5090（在我写作时它与 FreeSWITCH 在同一台机器上，所以不能再使用端口 
5060）。其中每个消息短横线之间的内容都是 FreeSWITCH 中输出的调试信息，不是 SIP 的一部分。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 584 bytes from udp/[192.168.4.4]:5090 at 12:30:57.916812: ------------------------------------------------------------------------ REGISTER sip:192.168.4.4;transport=UDP SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-d9ed3bbae47e568b-1---d8754z-;rport Max-Forwards: 70 Contact: &lt;sip:alice@192.168.4.4:5090;rinstance=d42207a765c0626b;transport=UDP&gt; To: &lt;sip:alice@192.168.4.4;transport=UDP&gt; From: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=9c709222 Call-ID: NmFjNzA3MWY1MDI3NGViMjY1N2QwZDlmZWQ5ZGY2OGE. CSeq: 1 REGISTER Expires: 3600 Allow: INVITE, ACK, CANCEL, BYE, NOTIFY, REFER, MESSAGE, OPTIONS, INFO, SUBSCRIBE User-Agent: Zoiper rev.5415 Allow-Events: presence Content-Length: 0 </code></pre><p style="line-height: 1.67em;">recv 表明 FreeSWITCH 收到来自 alice 的消息。我们前面已经说进，SIP 是纯文本的协议，类似 HTTP，所以很容易阅读。</p><ul style="line-height: 1.67em;"><li>第一行的 REGISTER 表示是一条注册消息。</li><li>Via 是 SIP 的消息路由，如果 SIP 经过好多代理服务器转发，则会有多条 Via 记录。</li><li>Max-forwards 指出消息最多可以经过多少次转发，主要是为了防止产生死循环。</li><li>Contact 是 alice 家的地址，本例中，FreeSWITCH 应该能在 192.168.4.4 这台机器上的 5090 端口找到她。</li><li>To 和 From 先不管。</li><li>Call-ID 是本次 SIP 会话（Session）的标志。</li><li>CSeq 是一个序号，由于 UDP 是不可靠的协议，在不可靠的网络上可能丢包，所以有些包需要重发，该序号则可以防止重发引起的消息重复。</li><li>Expires
 是说明本次注册的有效期，单位是秒。在本例中，alice 应该在一小时内再次向 FreeSWITCH 注册，防止 FreeSWITCH 
忘掉她。实际上，大部分 UA 的实现都会在几十秒内就重新发一次注册请求，这在 NAT 的网络中有助于保持连接。</li><li>Allow 是说明 alice 的 UA 所能支持的功能，某些 UA 功能丰富，而某些 UA 仅有有限的功能。</li><li>User-Agent 是 UA 的型号。</li><li>Allow-Events 则是说明她允许哪些事件通知。</li><li>Content-Length 是消息体（Body）的长度，在这里，只有消息头（Header），没有消息体，因此长度为 0 。</li></ul><p style="line-height: 1.67em;">.</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 664 bytes to udp/[192.168.4.4]:5090 at 12:30:57.919364: ------------------------------------------------------------------------ SIP/2.0 401 Unauthorized Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-d9ed3bbae47e568b-1---d8754z-;rport=5090 From: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=9c709222 To: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=QFXyg6gcByvUH Call-ID: NmFjNzA3MWY1MDI3NGViMjY1N2QwZDlmZWQ5ZGY2OGE. CSeq: 1 REGISTER User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces WWW-Authenticate: Digest realm="192.168.4.4",     nonce="62fb812c-71d2-4a36-93d6-e0008e6a63ee", algorithm=MD5, qop="auth" Content-Length: 0 </code></pre><p style="line-height: 1.67em;">FreeSWITCH
 需要验证 alice 的身分才允许她注册。在 SIP 中，没有发明新的认证方式，而是使用已有的 HTTP 
摘要（Digest）方式来认证。401 消息表示未认证，它是 FreeSWITCH 对 alice 
的响应。同时，它在本端生成一个认证摘要（WWW-Authenticate），一齐发送给 alice。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 846 bytes from udp/[192.168.4.4]:5090 at 12:30:57.921011: ------------------------------------------------------------------------ REGISTER sip:192.168.4.4;transport=UDP SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-dae1693be9f8c10d-1---d8754z-;rport Max-Forwards: 70 Contact: &lt;sip:alice@192.168.4.4:5090;rinstance=d42207a765c0626b;transport=UDP&gt; To: &lt;sip:alice@192.168.4.4;transport=UDP&gt; From: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=9c709222 Call-ID: NmFjNzA3MWY1MDI3NGViMjY1N2QwZDlmZWQ5ZGY2OGE. CSeq: 2 REGISTER Expires: 3600 Allow: INVITE, ACK, CANCEL, BYE, NOTIFY, REFER, MESSAGE, OPTIONS, INFO, SUBSCRIBE User-Agent: Zoiper rev.5415 Authorization: Digest username="alice",realm="192.168.4.4",     nonce="62fb812c-71d2-4a36-93d6-e0008e6a63ee",     uri="sip:192.168.4.4;transport=UDP",response="32b5ddaea8647a3becd25cb84346b1c3",     cnonce="b4c6ac7e57fc76b85df9440994e2ede8",nc=00000001,qop=auth,algorithm=MD5 Allow-Events: presence Content-Length: 0 </code></pre><p style="line-height: 1.67em;">alice 收到带有摘要的 401 后，后新发起注册请求，这一次，加上了根据收到的摘要和它自己的密码生成的认证信息（Authorization）。并且，你可以看到，CSeq 序号变成了 2。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 665 bytes to udp/[192.168.4.4]:5090 at 12:30:57.936940: ------------------------------------------------------------------------ SIP/2.0 200 OK Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-dae1693be9f8c10d-1---d8754z-;rport=5090 From: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=9c709222 To: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=rrpQj11F86jeD Call-ID: NmFjNzA3MWY1MDI3NGViMjY1N2QwZDlmZWQ5ZGY2OGE. CSeq: 2 REGISTER Contact: &lt;sip:alice@192.168.4.4:5090;rinstance=d42207a765c0626b;transport=UDP&gt;;expires=3600 Date: Tue, 27 Apr 2010 12:30:57 GMT User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Content-Length: 0 </code></pre><p style="line-height: 1.67em;">FreeSWITCH 收到带有认证的注册消息后，核实 alice 身份，认证通过，回应 200 OK。 如果失败，则回应 403 Forbidden 或其它失败消息，如下。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 542 bytes to udp/[192.168.4.4]:5090 at 13:22:49.195554: ------------------------------------------------------------------------ SIP/2.0 403 Forbidden Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-d447f43b66912a1b-1---d8754z-;rport=5090 From: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=c097e17f To: &lt;sip:alice@192.168.4.4;transport=UDP&gt;;tag=yeecX364pvryj Call-ID: ZjkxMGJmMjE4Y2ZiNjU5MzM5NDZkMTE5NzMzMzM0Mjc. CSeq: 2 REGISTER User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Content-Length: 0            </code></pre><p style="line-height: 1.67em;">你可以看到，alice 的密码是不会直接在 SIP 中传送的，因而一定程序上保证了安全（当然还是会有中间人，重放之类的攻击，我们留到后面讨论）。</p><h2 style="font-family: Arial, Helvetica, sans-serif; letter-spacing: -1px; color: rgb(0, 0, 139);">SIP 呼叫流程</h2><h3 style="font-family: Arial, Helvetica, sans-serif; letter-spacing: -1px; color: rgb(0, 0, 139);">UA 间直接呼叫</h3><p style="line-height: 1.67em;">上
面我们说过，SIP 的 UA 是平等的，如果一方知道另一方的地址，就可以通信。我们先来做一个实验。在笔者的机器上，我启动了两个软电话（UA）， 
一个是 bob 的 X-Lite（左），另一个是 alice 是 Zoiper。它们的 IP 地址都是 192.168.4.4，而端口号分别是 
26000 和 5090，当 bob 呼叫 alice 时，它只需直接呼叫 alice 的 SIP 
地址：sip:alice@192.168.4.4:5090。如图，alice 的电话正在振铃：</p><p style="line-height: 1.67em;"><img alt="SIP 基础知识 - hjz51 - hjz51的博客" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/4-4.png"></p><p style="line-height: 1.67em;">详细的呼叫流程图为：</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>bob               alice |                     | |    INVITE           | |--------------------&gt;| |    100 Trying       | |&lt;--------------------| |    180 Ringing      | |&lt;--------------------| |    200 OK           | |&lt;--------------------| |    ACK              | |--------------------&gt;| |                     | |&lt;---RTP-------------&gt;| |&lt;---RTP-------------&gt;| |&lt;---RTP-------------&gt;| |    ...              | |                     | |    BYE              | |&lt;--------------------| |    200 OK           | |--------------------&gt;| |                     | </code></pre><p style="line-height: 1.67em;">首
先 bob 向 alice 发送 INVITE 请求建立 SIP 连接，alice 的 UA 回 100 Trying 
说我收到你的请求了，先等会，接着 alice 的电话开始振铃，并给对回消息 180 Ringing 说我这边已经振铃了，alice 
一会就过来接电话，bob 的 UA 收到该消息后可以播放回铃音。接着 alice 接了电话，她发送 200 OK 消息给 bob，该消息是对 
INVITE 消息的最终响应，而先前的 100 和 180 消息都是临时状态，只是表明呼叫进展的情况。 bob 收到 200 后向 alice 回
 ACK 证实消息。 INVITE - 200 - ACK 完成三次握手，它们合在一起称作一个对话（Dialogue）。这时候 bob 已经在跟
 alice 能通话了，他们通话的内容（语音数据）是在SIP之外的 RTP 包中传递的，我们后面再详细讨论。</p><p style="line-height: 1.67em;">最后，alice 挂断电话，向 bob 送 BYE 消息，bob 收到 BYE 后回送 200 OK，通话完毕。其中 BYE 和 200 OK 也是一个对话，而上面的所有消息，称作一个会话（Session）。</p><p style="line-height: 1.67em;">反过来也一样，alice 可以直接呼叫 bob 的地址： sip:bob@192.168.4.4:26000。</p><p style="line-height: 1.67em;">上
面描述了一个最简单的 SIP 呼叫流程。实际上，SIP 还有其它一些消息，它们大致可分为请求和响应两类。请求由 UAC 发出，到达 UAS 后，
 UAS 回送响应消息。某些响应消息需要证实（ACK），以完成三次握手。其中请求消息包括 
INVITE、ACK、OPTIOS、BYE、CANCEL、REGISTER 以及一些扩展 
re-INVITE、PRACK、SUBSCRIBE、NOTIFY、UPDATE、MESSAGE、REFER等。而响应消息则都包含一个状态码。跟 
HTTP 响应类似，状态码有三位数字组成。其中，1xx 组的响应为临时状态，表明呼叫进展的情况；2xx 表明请求已成功处理；3xx 表明 SIP
 请求需要转向到另一个 UAS 处理；4xx 表明请求失败，这种失败一般是由客户端或网络引起的，如密码错误等；5xx 为服务器内部错误；6xx 
为更严重的错误。</p><h3 style="font-family: Arial, Helvetica, sans-serif; letter-spacing: -1px; color: rgb(0, 0, 139);">通过 B2BUA 呼叫</h3><p style="line-height: 1.67em;">在
真实世界中，bob 和 alice 肯定要经常改变位置，那么它们的 SIP 地址也会相应改变，并且，如果他们之中有一个或两个处于 NAT 
的网络中时，直接通信就更困难了。所以，他们通常会借助于一个服务器来相互通信。通过注册到服务器上，他们都可以获得一个服务器上的 SIP 
地址。注册服务器的地址一般是不变的，因此他们的 SIP 地址就不会发生变化，因而，他们总是能够进行通信。</p><p style="line-height: 1.67em;">我
们让他们两个都注册到 FreeSWITCH 上。上面已经说过，FreeSWITCH 监听的端口是 SIP 默认的端口 5060。bob 和 
alice 注册后，他们分别获得了一个服务器的地址（SIP URI）：sip:bob@192.168.4.4 和 
sip:alice@192.168.4.4（默认的端口号 5060 可以省略）。</p><p style="line-height: 1.67em;">下面是 bob 呼叫 alice 的流程。需要指出，如果 bob 只是发起呼叫而不接收呼叫，他并不需要向 FreeSWITCH 注册（有些软交换服务器需要先注册才能发起呼叫，但 SIP 是不强制这么做的）。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 1118 bytes from udp/[192.168.4.4]:26000 at 13:31:39.938891: ------------------------------------------------------------------------ INVITE sip:alice@192.168.4.4 SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-56adad736231f024-1---d8754z-;rport Max-Forwards: 70 Contact: &lt;sip:bob@192.168.4.4:26000&gt; To: "alice"&lt;sip:alice@192.168.4.4&gt; From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 1 INVITE Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE, SUBSCRIBE, INFO Content-Type: application/sdp User-Agent: X-Lite release 1014k stamp 47051 Content-Length: 594 </code></pre><p style="line-height: 1.67em;">上
面的消息中省略了 SDP 的内容，我们将留到以后再探讨。bob 的 UAC 通过 INVITE 消息向 FreeSWITCH 发起请求。bob 的
 UAC 用的是 X-Lite（User-Agent），它运行在端口 26000 上（实际上，它默认在端口也是 
5060，但由于在我的实验环境下它也是跟 FreeSWITCH 运行在一台机器上，已被占用，因此它需要选择另一个端口）。其中，From 
为主叫用户的地址，To 为被叫用户的地址。此时 FreeSWITCH 作为一个 UAS 接受请求并进行响应。它得知 bob 要呼叫 
alice，需要在自己的数据库中查找 alice 是否已在服务器上注册，好知道应该怎么找到 alice。但在此之前，它先通知 bob 
它已经收到了他的请求。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 345 bytes to udp/[192.168.4.4]:26000 at 13:31:39.940278: ------------------------------------------------------------------------ SIP/2.0 100 Trying Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-56adad736231f024-1---d8754z-;rport=26000 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a To: "alice"&lt;sip:alice@192.168.4.4&gt; Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 1 INVITE User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Content-Length: 0         </code></pre><p style="line-height: 1.67em;">FreeSWITCH 通过 100 Trying 消息告诉 bob “我已经收到你的消息了，别着急，我正在联系 alice 呢...” 该消息称为呼叫进展消息。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 826 bytes to udp/[192.168.4.4]:26000 at 13:31:39.943392: ------------------------------------------------------------------------ SIP/2.0 407 Proxy Authentication Required Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-56adad736231f024-1---d8754z-;rport=26000 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a To: "alice" &lt;sip:alice@192.168.4.4&gt;;tag=B4pem31jHgtHS Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 1 INVITE User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Accept: application/sdp Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Allow-Events: talk, presence, dialog, line-seize, call-info, sla,     include-session-description, presence.winfo, message-summary, refer Proxy-Authenticate: Digest realm="192.168.4.4",     nonce="31c5c3e0-cc6e-46c8-a661-599b0c7f87d8", algorithm=MD5, qop="auth" Content-Length: 0 </code></pre><p style="line-height: 1.67em;">但就在此时，FreeSWITCH 发现 bob 并不是授权用户，因而它需要确认 bob 的身份。它通过发送带有 Digest 验证信息的 407 消息来通知 bob（注意，这里与注册流程中的 401 不同）。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 319 bytes from udp/[192.168.4.4]:26000 at 13:31:39.945314: ------------------------------------------------------------------------ ACK sip:alice@192.168.4.4 SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-56adad736231f024-1---d8754z-;rport To: "alice" &lt;sip:alice@192.168.4.4&gt;;tag=B4pem31jHgtHS From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 1 ACK Content-Length: 0 </code></pre><p style="line-height: 1.67em;">bob 回送 ACK 证实消息向 FreeSWITCH 证实已收到认证要求。并重新发送 INVITE，这次，附带了验证信息。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 1376 bytes from udp/[192.168.4.4]:26000 at 13:31:39.945526: ------------------------------------------------------------------------ INVITE sip:alice@192.168.4.4 SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-87d60b47b6627c3a-1---d8754z-;rport Max-Forwards: 70 Contact: &lt;sip:bob@192.168.4.4:26000&gt; To: "alice"&lt;sip:alice@192.168.4.4&gt; From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 2 INVITE Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE, SUBSCRIBE, INFO Content-Type: application/sdp Proxy-Authorization: Digest username="bob",realm="192.168.4.4",     nonce="31c5c3e0-cc6e-46c8-a661-599b0c7f87d8",     uri="sip:alice@192.168.4.4",response="327887635344405bcd545da06763c466",     cnonce="c164b74f625ff2161bd8d47dba3a0ee2",nc=00000001,qop=auth,     algorithm=MD5 User-Agent: X-Lite release 1014k stamp 47051 Content-Length: 594 </code></pre><p style="line-height: 1.67em;">这里也省略了 SDP 消息体。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 345 bytes to udp/[192.168.4.4]:26000 at 13:31:39.946349: ------------------------------------------------------------------------ SIP/2.0 100 Trying Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-87d60b47b6627c3a-1---d8754z-;rport=26000 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a To: "alice"&lt;sip:alice@192.168.4.4&gt; Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 2 INVITE User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Content-Length: 0 </code></pre><p style="line-height: 1.67em;">FreeSWITCH 重新回 100 Trying，告诉 bob 呼叫进展情况。</p><p style="line-height: 1.67em;">至此，bob 与 FreeSWITCH 之间的通信已经初步建立，这种通信的通道称作一个信道（channel）。该信道是由 bob 的 UA 和 FreeSWITCH 的一个 UA 构成的，我们称它为 FreeSWITCH 的一条腿，叫做 a-leg。</p><p style="line-height: 1.67em;">接下来 FreeSWITCH 要建立另一条腿，称为 b-leg。它通过查打本地数据库，得到了 alice 的位置，接着启动一个 UA（用作 UAC），向 alice 发送 INVITE 消息。如下：</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 1340 bytes to udp/[192.168.4.4]:5090 at 13:31:40.028988: ------------------------------------------------------------------------ INVITE sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4;rport;branch=z9hG4bKey90QUyHZQXNN Route: &lt;sip:alice@192.168.4.4:5090&gt;;rinstance=e7d5364c81f2b879;transport=UDP Max-Forwards: 69 From: "Bob" &lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg To: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt; Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 130069214 INVITE Contact: &lt;sip:mod_sofia@192.168.4.4:5060&gt; User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Allow-Events: talk, presence, dialog, line-seize, call-info, sla,     include-session-description, presence.winfo, message-summary, refer Content-Type: application/sdp Content-Disposition: session Content-Length: 313 X-FS-Support: update_display Remote-Party-ID: "Bob" &lt;sip:bob@192.168.4.4&gt;;party=calling;screen=yes;privacy=off </code></pre><p style="line-height: 1.67em;">你
可以看到，该INVITE 的 Call-ID 与前面的不同，说明这是另一个 SIP 会话（Session）。另外，它还多了一个 
Remote-Party-ID，它主要是用来支持来电显示。因为，在 alice 的话机上，希望显示 bob 的号码，显示呼叫它的那个 UA（负责
 b-leg的那个 UA）没什么意义。与普通的 POTS 电话不同，在 SIP 电话中，不仅能显示电话号码（这里是 
bob），还能显示一个可选的名字（“Bob”）。这也说明了 FreeSWITCH 这个 B2BUA 本身是一个整体，它虽然是以一个单独的 UA 
呼叫 alice，但还是跟负责 bob 的那个 UA 有联系--就是这种背靠背的串联。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 309 bytes from udp/[192.168.4.4]:5090 at 13:31:40.193634: ------------------------------------------------------------------------ SIP/2.0 100 Trying Via: SIP/2.0/UDP 192.168.4.4;rport=5060;branch=z9hG4bKey90QUyHZQXNN To: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt; From: "Bob" &lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 130069214 INVITE Content-Length: 0 </code></pre><p style="line-height: 1.67em;">跟上面的流程差不多，alice回的呼叫进展。此时，alice 的 UA 开始振铃。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 431 bytes from udp/[192.168.4.4]:5090 at 13:31:40.193816: ------------------------------------------------------------------------ SIP/2.0 180 Ringing Via: SIP/2.0/UDP 192.168.4.4;rport=5060;branch=z9hG4bKey90QUyHZQXNN Contact: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt; To: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt;;tag=3813e926 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 130069214 INVITE User-Agent: Zoiper rev.5415 Content-Length: 0 </code></pre><p style="line-height: 1.67em;">180也是呼叫进展消息，它说明，我这边已经准备好了，alice 的电话已经响了，她听到了一会就会接听。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>send 1125 bytes to udp/[192.168.4.4]:26000 at 13:31:40.270533: ------------------------------------------------------------------------ SIP/2.0 183 Session Progress Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-87d60b47b6627c3a-1---d8754z-;rport=26000 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a To: "alice" &lt;sip:alice@192.168.4.4&gt;;tag=cDg7NyjpeSg4m Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 2 INVITE Contact: &lt;sip:alice@192.168.4.4:5060;transport=udp&gt; User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Accept: application/sdp Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Allow-Events: talk, presence, dialog, line-seize, call-info, sla,     include-session-description, presence.winfo, message-summary, refer Content-Type: application/sdp Content-Disposition: session Content-Length: 267 Remote-Party-ID: "alice" &lt;sip:alice@192.168.4.4&gt; </code></pre><p style="line-height: 1.67em;">FreeSWITCH 在收到 alice 的 180 Ringing 消息后，便告诉 bob 呼叫进展情况，183 与 180 不同的是，它包含 SDP，即接下来它会向 bob 发送 RTP 的媒体流，就是回铃音。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 768 bytes from udp/[192.168.4.4]:5090 at 13:31:43.251980: ------------------------------------------------------------------------ SIP/2.0 200 OK Via: SIP/2.0/UDP 192.168.4.4;rport=5060;branch=z9hG4bKey90QUyHZQXNN Contact: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt; To: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt;;tag=3813e926 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 130069214 INVITE Allow: INVITE, ACK, CANCEL, BYE, NOTIFY, REFER, MESSAGE, OPTIONS, INFO, SUBSCRIBE Content-Type: application/sdp User-Agent: Zoiper rev.5415 Content-Length: 226 </code></pre><p style="line-height: 1.67em;">alice 接听电话以后，其 UA 向 FreeSWITCH 送 200 OK，即应答消息。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 436 bytes to udp/[192.168.4.4]:5090 at 13:31:43.256692: ------------------------------------------------------------------------ ACK sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4;rport;branch=z9hG4bKF72SSpFNv0K8g Max-Forwards: 70 From: "Bob" &lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg To: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt;;tag=3813e926 Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 130069214 ACK Contact: &lt;sip:mod_sofia@192.168.4.4:5060&gt; Content-Length: 0 </code></pre><p style="line-height: 1.67em;">FreeSWITCH 向 alice 回送证实消息，证实已经知道了。至此，b-leg已经完全建立完毕，多半这时 alice 已经开始说话了：“Hi, bob，你好……”</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 1135 bytes to udp/[192.168.4.4]:26000 at 13:31:43.293311: ------------------------------------------------------------------------ SIP/2.0 200 OK Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-87d60b47b6627c3a-1---d8754z-;rport=26000 From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a To: "alice" &lt;sip:alice@192.168.4.4&gt;;tag=cDg7NyjpeSg4m Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 2 INVITE Contact: &lt;sip:alice@192.168.4.4:5060;transport=udp&gt; User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Allow-Events: talk, presence, dialog, line-seize, call-info, sla,     include-session-description, presence.winfo, message-summary, refer Session-Expires: 120;refresher=uas Min-SE: 120 Content-Type: application/sdp Content-Disposition: session Content-Length: 267 Remote-Party-ID: "alice" &lt;sip:alice@192.168.4.4&gt; </code></pre><p style="line-height: 1.67em;">与此同时，它也给 bob 送应答消息，告诉他电话已经接通了，可以跟 alice 说话了。在需要计费的情况下，应该从此时开始对 bob 的电话计费。bob 的 UA 收到该消息后启动麦克风让 bob 讲话。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 697 bytes from udp/[192.168.4.4]:26000 at 13:31:43.413025: ------------------------------------------------------------------------ ACK sip:alice@192.168.4.4:5060;transport=udp SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:26000;branch=z9hG4bK-d8754z-ef53864320037c04-1---d8754z-;rport Max-Forwards: 70 Contact: &lt;sip:bob@192.168.4.4:26000&gt; To: "alice"&lt;sip:alice@192.168.4.4&gt;;tag=cDg7NyjpeSg4m From: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 2 ACK Proxy-Authorization: Digest username="bob",realm="192.168.4.4",     nonce="31c5c3e0-cc6e-46c8-a661-599b0c7f87d8",     uri="sip:alice@192.168.4.4",response="327887635344405bcd545da06763c466",     cnonce="c164b74f625ff2161bd8d47dba3a0ee2",nc=00000001,qop=auth,     algorithm=MD5 User-Agent: X-Lite release 1014k stamp 47051 Content-Length: 0 </code></pre><p style="line-height: 1.67em;">bob 在收到应答消息后也需要回送证实消息。至此 a-leg 也建立完毕。双方正常通话。</p><p style="line-height: 1.67em;">[][][][][][]&nbsp;<strong>此处省略 5000 字</strong>&nbsp;[][][][][]</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 484 bytes from udp/[192.168.4.4]:5090 at 13:31:49.949240: ------------------------------------------------------------------------ BYE sip:mod_sofia@192.168.4.4:5060 SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-2146ae0ddd113efe-1---d8754z-;rport Max-Forwards: 70 Contact: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt; To: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg From: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt;;tag=3813e926 Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 2 BYE User-Agent: Zoiper rev.5415 Content-Length: 0 </code></pre><p style="line-height: 1.67em;">终于聊完了，alice 挂断电话，发送 BYE 消息。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 543 bytes to udp/[192.168.4.4]:5090 at 13:31:49.950425: ------------------------------------------------------------------------ SIP/2.0 200 OK Via: SIP/2.0/UDP 192.168.4.4:5090;branch=z9hG4bK-d8754z-2146ae0ddd113efe-1---d8754z-;rport=5090 From: &lt;sip:alice@192.168.4.4:5090;rinstance=e7d5364c81f2b879;transport=UDP&gt;;tag=3813e926 To: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=Dp9ZQS3SB26pg Call-ID: 0d74ac35-cca4-122d-81a2-2990e5b2bd3e CSeq: 2 BYE User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Content-Length: 0 </code></pre><p style="line-height: 1.67em;">FreeSWITCH 返回 OK，b-leg 释放完毕。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ send 630 bytes to udp/[192.168.4.4]:26000 at 13:31:50.003165: ------------------------------------------------------------------------ BYE sip:bob@192.168.4.4:26000 SIP/2.0 Via: SIP/2.0/UDP 192.168.4.4;rport;branch=z9hG4bKggvjUH0rS99tc Max-Forwards: 70 From: "alice" &lt;sip:alice@192.168.4.4&gt;;tag=cDg7NyjpeSg4m To: "Bob" &lt;sip:bob@192.168.4.4&gt;;tag=15c8325a Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 130069219 BYE Contact: &lt;sip:alice@192.168.4.4:5060;transport=udp&gt; User-Agent: FreeSWITCH-mod_sofia/1.0.trunk-16981M Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, UPDATE, INFO, REGISTER, REFER,     NOTIFY, PUBLISH, SUBSCRIBE Supported: timer, precondition, path, replaces Reason: Q.850;cause=16;text="NORMAL_CLEARING" Content-Length: 0 </code></pre><p style="line-height: 1.67em;">接下来 FreeSWITCH 给 bob 发送 BYE，通知要拆线了。出于对 bob 负责，它包含了挂机原因（Hangup Cause），此处 NOMAL_CLEARING 表示正常释放。</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>------------------------------------------------------------------------ recv 367 bytes from udp/[192.168.4.4]:26000 at 13:31:50.111765: ------------------------------------------------------------------------ SIP/2.0 200 OK Via: SIP/2.0/UDP 192.168.4.4;rport=5060;branch=z9hG4bKggvjUH0rS99tc Contact: &lt;sip:bob@192.168.4.4:26000&gt; To: "Bob"&lt;sip:bob@192.168.4.4&gt;;tag=15c8325a From: "alice"&lt;sip:alice@192.168.4.4&gt;;tag=cDg7NyjpeSg4m Call-ID: YWEwYjNlZTZjOWZjNDg3ZjU3MjQ3MTA1ZmQ1MDM5YmQ. CSeq: 130069219 BYE User-Agent: X-Lite release 1014k stamp 47051 Content-Length: 0 </code></pre><p style="line-height: 1.67em;">bob 回送 OK，a-leg 释放完毕，通话结束。从下图可以很形象地看出 FreeSWITCH 的两条“腿”-- a-leg 和 b-leg。</p><p style="line-height: 1.67em;"><img alt="SIP 基础知识 - hjz51 - hjz51的博客" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/4-3.png"></p><p style="line-height: 1.67em;">整个呼叫流程图示如下：</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>bob (UAC)           [ UAS-UAC ]          (UAS) alice  |                     |   |                     |  |   INVITE            |   |                     |  |--------------------&gt;|   |                     |  |   100 Trying        |   |                     |  |&lt;--------------------|   |                     |  |   407 Authentication Required                 |  |&lt;--------------------|   |                     |  |   ACK               |   |                     |  |--------------------&gt;|   |                     |  |   INVITE            |   |                     |  |--------------------&gt;|   |                     |  |   100 Trying        |   |    INVITE           |  |&lt;--------------------&lt;   &gt;--------------------&gt;|  |                     |   |    100 Trying       |  |                     |   |&lt;--------------------|  |   183 Progress      |   |    180 Ringing      |  |&lt;--------------------&lt;   |&lt;--------------------|  |                     |   |    200 OK           |  |                     |   |&lt;--------------------|  |   200 OK            |   |    ACK              |  |&lt;--------------------&lt;   &gt;--------------------&gt;|  |   ACK               |   |                     |  |--------------------&gt;|   |                     |  |                                               |  |                Call Connected                 |  |                                               |  |                     |   |     BYE             |  |                     |   |&lt;--------------------|  |   BYE               |   |    200 OK           |  |&lt;--------------------&lt;   &gt;--------------------&gt;|  |   200 OK            |   |                     |  |--------------------&gt;|   |                     |  |                     |   |                     | </code></pre><p style="line-height: 1.67em;">从流程图可以看出，右半部分跟上一节“UA间直接呼叫”一样，而左半部分也类似。这就更好的说明了实际上有 4 个 UA （两对）参与到了通信中，并且，有两个 Session。</p><h2 style="font-family: Arial, Helvetica, sans-serif; letter-spacing: -1px; color: rgb(0, 0, 139);">再论 SIP URI</h2><p style="line-height: 1.67em;">上面我们介绍了一些 FreeSWITCH 的基本概念，并通过一个真正的呼叫流程讲解了一下 SIP。由于实验中所有 UA 都 运行在一台机器上，这可能会引起迷惑，如果我们有三台服务器，那么情况可能是：</p><pre style="font-family: Monaco, monospace; color: rgb(0, 0, 0); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); padding-top: 0.4em; padding-right: 0.4em; padding-bottom: 0.4em; padding-left: 0.8em;"><code>                    /---------------\                     |  FreeSWITCH   |                     |  192.168.0.1  |                     \ --------------/ sip:bob@192.168.0.1    /          \     sip:alice@192.168.0.1                       /            \                      /              \   /-----------------\               /-----------------\   |  bob            |               |  alice          |   |  192.168.0.100  |               |  192.168.0.200  |   \-----------------/               \-----------------/    sip:bob@192.168.0.100                sip:alice@192.168.0.200 </code></pre><p style="line-height: 1.67em;">alice
 注册到 FreeSWITCH，bob呼叫她时，使用她的服务器地址，即 sip:alice@192.168.0.1，FreeSWITCH 
接到请求后，查找本地数据库，发现 alice 的实际地址是 sip:alice@192.168.0.200，便可以建立呼叫。</p><p style="line-height: 1.67em;">SIP URI 除使用 IP 地址外，也可以使用域名，如 sip:alice@freeswitch.org.cn。更高级也更复杂的配置则需要 DNS 的 SRV 记录，在此就不做讨论了。</p></span><wbr></div>
        <div class="nbw-blog-end"></div>

        <div>
		</div>
		
        <div>
		</div>
		
		<div>
      	  <div>
		  	<div class="wumii-hook"></div><script type="text/javascript" id="wumiiRelatedItems"></script>
		  </div>
		</div>
		
        <div style="left: 10px; top: 3698px;" class="ptc ztag phide">
          <span class="ptcp">
            <span class="iblock bcmimg">&nbsp;</span>
            <span class="nbc-0 nbc-0-40 ptcmt ptcmt-2">评论这张</span>
          </span>
        </div>
		<div style="left: 105px; top: 3698px;" class="ptc ztag phide">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/microblog.png">
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>
        <div class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/microblog.png">
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>
        
        
        <div class="nbw-act tbar fc03 clearfix">
         <div style="height:24px;line-height:24px;">
          <div class="pleft rdif">
	          <span class="pnt pleft" id="$_spanRecommend"><img class="pclass" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/tuijian.png"></span>
	        <span id="$_spanShowRecommend" class="pleft rdct  phide">
	          <span class="pleft ul fc03"><span id="$_spanRecommendCount">0</span>人</span><span class="pleft iblock icn0 icn0-722 nbw-tgl1 nas-icn0fix">&nbsp;</span><span class="pleft iblock icn0 icn0-621 nbw-tgl0 nas-icn0fix">&nbsp;</span><span class="fc07"></span>|&nbsp;
	        </span>
	         <span class="fc07 pleft nas-tofix">分享到：</span><span class="nas-wrap pleft"><span id="$_shareBtn_163weibo" title="分享到网易微博" class="nas-itm nas-itm0">&nbsp;</span><span id="$_shareBtn_sinaweibo" title="分享到新浪微博" class="nas-itm nas-itm6">&nbsp;</span><span id="$_shareBtn_qqweibo" title="分享到腾讯微博" class="nas-itm nas-itm9">&nbsp;</span><span class="nas-itm nas-itm7" title="分享到MSN" id="$_shareBtn_msn">&nbsp;</span><span class="nas-itm nas-itm3" title="分享到QQ空间" id="$_shareBtn_qq">&nbsp;</span><span class="nas-itm nas-itm1" title="分享到人人网" id="$_shareBtn_renren">&nbsp;</span><span class="nas-itm nas-itm2" title="分享到开心网" id="$_shareBtn_kaixin">&nbsp;</span><span class="nas-itm nas-itm4" title="分享到豆瓣" id="$_shareBtn_douban">&nbsp;</span></span>
          </div>
          <div class="pright">
              <span class="fc07">阅读(<span id="$_spaniReadCount">25</span>)</span><span class="sep fc07">|</span>
              <span class="fc07">评论(<span id="$_spaniCommentCount">0</span>)</span><span class="sep fc07">|</span>
              <span class="fc07">不可转载</span>
              <span class="sep fc07">|</span><span id="$_spanReport" class="m2a">举报</span>
          </div>
         </div>
        </div>
      </div>
      <div class="snl">
        <div class="phide bdwb bds2 bdc0 rdcnt" id="$_divRecommendContent"></div>
        <div id="yodaoad" class="bdwb bds2 bdc0" style="display:none;_zoom:1;">&nbsp;</div>
        <div id="$_divTopLink" class="top fc03 clearfix">
	        <span class="ilft iblock icn0 icn0-620">&nbsp;</span>
	        <div class="pleft thide"><a class="m2a" href="http://hjz5511.blog.163.com/blog/static/1967640932011919112252994/">FreeSWITCH 与 Asterisk 的比较</a></div>
	        <span class="irgt iblock icn0 icn0-619">&nbsp;</span>
	        <div class="pright thide"><a class="m2a" href="http://hjz5511.blog.163.com/blog/static/19676409320119195922183/">SIP 模块 mod_sofia</a></div>
	     </div> 
	    <div class="relateblog phide">
          <h4 class="bdwb bds2 bdc0 fc07 fs0">历史上的今天</h4>
          <div class="cnt ztag clearfix"></div>
        </div>
	    <div class="relateblog phide">
          <h4 class="bdwb bds2 bdc0 fc07 fs0">相关文章</h4>
          <div class="cnt ztag clearfix"></div>
        </div>
	    <div class="author phide">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">最近读者</h4>
	      <div class="cnt ztag clearfix"><div class="pleft nlogif clearfix"> <div class="pleft nbw-f50 nbw-fce"><img class="cwd pnt" onerror="this.src=location.f60" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/face60.png"></div> <div class="m2a pright fc03"><span class="ul">登录</span>后，您可以在此留下足迹。</div> </div></div>
	    </div>
	    <div class="phide" id="yodaoad_1" style="_zoom:1;"></div>
	    <div class="comment">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">评论</h4>
	      <a name="blogComment" id="blogComment"></a>
	      <div class="ztag"><div>    <div class="publish ztag"><div class="nbw-cdt edt-cmt"><div class="nbw-act tp"> <span class="m2a fc03 ztag">点击登录</span><span class="sep">|</span><span class="fc05">昵称：</span><input maxlength="18" class="znick bdwa bds0 bdc0 ztag" type="text"> </div> <div class="edt ztag"><div class="ui-1076490637"><div class="zcnt ztag zbrd bdc0"><iframe src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/a.htm" frameborder="0"></iframe></div> <div class="zbtn"> <span class="zfce zbgp ztag space">&nbsp;</span> <input class="zbok zhnd ztag nbtn fc09 bdc1 bgc2" value="发表" type="button"> <span class="zbcc zhnd ztag fc04">取消</span> <div class="zvcd ztag" style="display:none;"> <label>验证码：</label><input class="zbrd xtag bdc0" maxlength="4" type="text"><img src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/empty.png" class="xtag" title="点击刷新验证码"><span class="xtag fc04">换一张</span> </div> </div> <div class="zmsg fc07" style="display:none;"><span class="zicn zbgp iblock">&nbsp;</span><span class="ztag"></span></div></div></div> <div style="display: none;" class="hnt thide ztag"></div></div></div>
    <div class="bdwt bds2 bdc0 phide" id="yodaoad_2" style="_zoom:1;"></div>
    <div class="ztag bdwt bds2 bdc0">
      <div class="case"></div>
      <div style="display: none;" class="clearfix"><div style="display: none;" class="ui-2340844961 noselect js-zfrg-6540"><span class="pgi pgb iblock fc03 bgc9 bdc0 js-znpg-097">上一页</span> <span class="pgi zpg1 iblock fc03 bgc9 bdc0 js-zslt-987 fc05">1</span> <span class="frg fgp fc06">...</span> <span style="display: none;" class="pgi zpg2 iblock fc03 bgc9 bdc0">-1</span> <span style="display: none;" class="pgi zpg3 iblock fc03 bgc9 bdc0">-1</span> <span style="display: none;" class="pgi zpg4 iblock fc03 bgc9 bdc0">-1</span> <span style="display: none;" class="pgi zpg5 iblock fc03 bgc9 bdc0">-1</span> <span style="display: none;" class="pgi zpg6 iblock fc03 bgc9 bdc0">-1</span> <span style="display: none;" class="pgi zpg7 iblock fc03 bgc9 bdc0">-1</span> <span style="display: none;" class="pgi zpg8 iblock fc03 bgc9 bdc0">-1</span> <span class="frg fgn fc06">...</span> <span style="display: none;" class="pgi zpg9 iblock fc03 bgc9 bdc0">-1</span> <span class="pgi pgb iblock fc03 bgc9 bdc0 js-znpg-097">下一页</span></div></div>
    </div>
  </div></div>
	    </div>
	    <div class="phide" id="yodaoad_3" style="_zoom:1;"></div>
      </div>
      <div class="cite ztag fc03 phide"></div>
    </div>
   </div>
  </div>
</div>

<script type="text/javascript">
var wumiiPermaLink = "http://blog.163.com/hjz5511/blog/static/1967640932011919527132/"; //文章的永久链接，作为文章的唯一标识
var wumiiTags = ""; //文章标签，以英文逗号分隔，如："标签1,标签2"
var wumiiSitePrefix = "http://blog.163.com/hjz5511/"; //博客的主页地址，作为博客的唯一标识
var wumiiParams = "&num=5&mode=3&pf=blog163"; //num为默认显示的相关文章数目，mode为默认的显示模式（1为文字，2为图片，3为自动）
</script>
<script type="text/javascript" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/relatedItemsWidget.htm"></script>
</div>
      <div class="l cl h100">&nbsp;</div>
      <div class="r cr h100">&nbsp;</div>
    </div>
    <div class="nb-mb lcr bh space">
      <div class="l bl bh">&nbsp;</div>
      <div class="r br bh">&nbsp;</div>
      <div class="c bc bh lcr">&nbsp;</div>
    </div>
  </div>

</div>
      <div class="l wl g lg h100">&nbsp;</div>
      <div class="l wl t lt">&nbsp;</div>
      <div class="l wl b lb">&nbsp;</div>
      <div class="r wr g rg h100">&nbsp;</div>
      <div class="r wr t rt">&nbsp;</div>
      <div class="r wr b rb">&nbsp;</div>
    </div>
  </div>
  <div class="nb-are nb-smb"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
<div class="nb-are nb-fot">
  <div class="wkg h">
    <h2>页脚</h2>
    <div class="k">      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/index_gb.html">公司简介</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://gb.corp.163.com/gb/contactus.html">联系方法</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/job/job.html">招聘信息</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://help.163.com/?b13abk1">客户服务</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/legal/legal.html">隐私政策</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/public/theme/">博客风格</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/services/wapblog.html">手机博客</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/vip.do">VIP博客</a>
      
      <link rel="alternate" type="application/rss+xml" title="RSS" href="http://hjz5511.blog.163.com/rss/">
      <span class="p fc10">-</span><span class="fc08" id="$_foot_subscribe"><span class="iblock m2a icn0 icn0-919">&nbsp;</span><a class="m2a fc08">订阅此博客</a></span>
    </div>
    <p class="fc08">网易公司版权所有&nbsp;&#169;1997-2012</p>
  </div>
</div></div>
    <!--[if lte IE 6]></div><![endif]-->
  <!--[if lte IE 6]></div><![endif]-->
  <div class="nb-layer" id="blog-163-com-layer"></div>
  
<script type="text/javascript">
  window.N = {tm:{'zbtn':'nbtn',
                  'bdc0':'bdc0','bdc2':'bdc1',
				  'bgc0':'bgc0','bgc1':'bgc1','bgc2':'bgc2','bgh0':'bgc9',
				  'fc00':'fc03','fc01':'fc04','fc02':'fc05','fc03':'fc06','fc04':'fc07','fc05':'fc09'}};
  Date.servTime = '06/18/2012 16:46:27';
  location.api = 'http://api.blog.163.com/';
  location.msg = 'http://api.blog.163.com/msg/dwr';
  location.dwr = 'http://api.blog.163.com/hjz5511/dwr';
  location.vcd = 'http://api.blog.163.com/cap/captcha.jpgx?parentId=196764093&r=';
  location.mrt = 'http://b.bst.126.net/newpage/style/mbox/';
  location.fce = 'http://os.blog.163.com/common/ava.s?host=';
  location.fce2= 'http://os.blog.163.com/common/ava.s?host=';
  location.passportfce = 'http://os.blog.163.com/common/ava.s?passport=';
  location.fpr = 'http://b.bst.126.net/common/portrait/face/preview/';
  location.f60 = 'http://b.bst.126.net/common/face60.png';
  location.f140= 'http://b.bst.126.net/common/face140.png';
  location.f40 = location.f140;
  location.adf140= 'http://b.bst.126.net/common/admireface140.png';
  location.ept = 'http://b.bst.126.net/common/empty.png';
  location.guide_profile_add= 'http://b.bst.126.net/common/guide_profile_add.gif';
  location.phtoto_dream = 'http://photo.dream.163.com/blog/writeBlogCallback.do';
  window.CF = {
    ca:false
   ,cb:''
   ,cc:false
   ,cd:false
   ,ce:'-3'
   ,ck:0
   ,ci:['api.blog.163.com'
       ,'http://photo.163.com/photo/html/crossdomain.html?t=20100205'
        
        ,'ud.blog.163.com'
        
        
        
        
        ]
   ,cj:[-3]
   ,cl:''
   ,cm:["","blog/","album/","music/","collection/","friends/","profile/","pprank/"]
   ,cf:0
   ,co:{pv:false
       ,ti:95614995
       ,tn:''
       ,tc:0
       ,tl:3
       ,ut:0
       ,un:''
       ,um:''
       ,ui:0
       ,ud:true}
   ,cp:{nr:0
       ,cr:0
       ,vr:-100
       ,fr:0}
   ,cs:0
   ,ct:{'nav':['首页','日志','相册','音乐','收藏','博友','关于我'],'enabled':[0,1,6],'defaultnav':parseInt('1111111',2)}
   ,cu:false
   ,cv:false
   ,cw:false
  };
  window.UD = {};
  UD.host = {
      userId:196764093
     ,userName:'hjz5511'
     ,nickName:'hjz51'
     ,imageUpdateTime:-1
     ,baseUrl:'http://hjz5511.blog.163.com/'
     ,gender:'他'
     ,email:'hjz51@qq.com'
     ,photo163Name:'hjz51@qq.com'
     ,photo163HostName:'hjz51@qq.com'
     ,TOKEN_HTMLMODULE:''
     ,isMultiUserBlog:false
     ,isWumiUser:true
     ,sRank:-100
  };
</script>
    <script type="text/javascript" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/pc.js"></script> <div style="position:absolute;top:0;right:0;z-index:999;width:1px;height:1px;overflow:hidden;"> <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="ntsstorage" codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab" height="1" width="1"> <param name="movie" value="/common/storage.swf?t=1340009188512"> <param name="AllowScriptAccess" value="sameDomain"> <embed src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/storage.swf" name="ntsstorage" allowscriptaccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" height="1" width="1">  </object> </div><iframe src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/crossdomain.htm" id="api.blog.163.com" name="api.blog.163.com" onload="J.a('api.blog.163.com');" style="display: none;" height="0" width="0"></iframe><iframe src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/crossdomain_002.htm" id="photo.163.com" name="photo.163.com" onload="J.a('photo.163.com');" style="display: none;" height="0" width="0"></iframe><iframe src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/crossdomain_003.htm" id="ud.blog.163.com" name="ud.blog.163.com" onload="J.a('ud.blog.163.com');" style="display: none;" height="0" width="0"></iframe>
    <script type="text/javascript" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/pm.js"></script>
  <script src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/ntes.js" type="text/javascript"></script>
  <script type="text/javascript">
    _ntes_nacc='blog';neteaseTracker();
    
    new Image().src = 'http://blog.163.com/newpage/images/analyse.png?s=p&t='+new Date().getTime();
  </script>

    <script type="text/javascript" src="SIP%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_files/prettify.js"></script>


</body></html>